LAYER
    NAME "pom_detections"
    TYPE POINT
    STATUS ON
    PROJECTION "init=epsg:${SRID}" END
    EXTENT ${MAPFILE_EXTENT}
    TEMPLATE fooOnlyForWMSGetFeatureInfo
    CONNECTIONTYPE POSTGIS
    PROCESSING "CLOSE_CONNECTION=DEFER"
    CONNECTION "user=${PGUSER} password=${PGPASSWORD} dbname=${PGDATABASE} host=${PGHOST}"
    DATA "geom FROM (SELECT geo.geom, geo.id,
                            geo.numero, geo.feu, geo.gaz, geo.sprinkler, geo.localisation, geo.adresse, geo.photo AS photo_empty, geo.remarque
                     FROM pompiers.pom_vgeo_detections AS geo
                     WHERE (ARRAY[%role_ids%] && ARRAY(${MAPSERVER_DATA_NOAREA_SUBSELECT} 'pom_detections'))
                    ) AS foo USING UNIQUE id USING srid=${SRID}"
    TOLERANCE ${WMS_TOLERANCE}
    DUMP TRUE
    METADATA
        "wms_title" "Détections"
        "gml_featureid" "id"
        "gml_types" "auto"
        "gml_include_items" "all"
        "gml_exclude_items" "id"
        "wms_srs" "${WMS_SRS}"
        "wfs_enable_request" "*"
        "ows_geometries" "geom"
        "ows_geom_type" "point"
    END
    VALIDATION
        "default_role_ids" "-1"
        "role_ids" "^-?[0-9,]*$"
    END
    MINSCALEDENOM 1
    MAXSCALEDENOM 901
    LABELITEM "localisation"
    CLASS
        NAME "Détections"
        STYLE
            SYMBOL "pom_detection"
            SIZE 20
        END
        LABEL
            TYPE TRUETYPE
            FONT "OpenSans-Bold"
            SIZE 8
            ANTIALIAS TRUE
            COLOR 255 255 255
            OUTLINECOLOR 255 0 0
            OUTLINEWIDTH 1
            POSITION LC
            ALIGN CENTER
            OFFSET 0 5
            WRAP " "
            MAXLENGTH 15
            FORCE TRUE
        END
    END
END

LAYER
    NAME "pom_edit_detections"
    TYPE POINT
    STATUS ON
    PROJECTION "init=epsg:${SRID}" END
    EXTENT ${MAPFILE_EXTENT}
    TEMPLATE fooOnlyForWMSGetFeatureInfo
    CONNECTIONTYPE POSTGIS
    PROCESSING "CLOSE_CONNECTION=DEFER"
    CONNECTION "user=${PGUSER} password=${PGPASSWORD} dbname=${PGDATABASE} host=${PGHOST}"
    DATA "geom FROM (SELECT geo.*
                     FROM pompiers.pom_vgeo_edit_detections AS geo
                     WHERE (ARRAY[%role_ids%] && ARRAY(${MAPSERVER_DATA_NOAREA_SUBSELECT} 'pom_edit_detections'))
                    ) AS foo USING UNIQUE id USING srid=${SRID}"
    TOLERANCE ${WMS_TOLERANCE}
    DUMP TRUE
    METADATA
        "wms_title" "Détections (édition)"
        "gml_featureid" "id"
        "gml_types" "auto"
        "gml_include_items" "all"
        "gml_exclude_items" "id"
        "wms_srs" "${WMS_SRS}"
        "wfs_enable_request" "*"
        "ows_geometries" "geom"
        "ows_geom_type" "point"
    END
    VALIDATION
        "default_role_ids" "-1"
        "role_ids" "^-?[0-9,]*$"
    END
    MINSCALEDENOM 1
    MAXSCALEDENOM 180001
    CLASS
        NAME "Détections"
        STYLE
            SYMBOL "pom_detection"
            SIZE 20
        END
        MINSCALEDENOM 1
        MAXSCALEDENOM 1801
    END
    CLASS
        NAME "Détections"
        STYLE
            SYMBOL "square"
            COLOR 255 0 0
            OUTLINECOLOR 255 255 255
            SIZE 9
        END
        MINSCALEDENOM 1801
        MAXSCALEDENOM 180001
    END
END

LAYER
    NAME "pom_cles"
    TYPE POINT
    STATUS ON
    PROJECTION "init=epsg:${SRID}" END
    EXTENT ${MAPFILE_EXTENT}
    TEMPLATE fooOnlyForWMSGetFeatureInfo
    CONNECTIONTYPE POSTGIS
    PROCESSING "CLOSE_CONNECTION=DEFER"
    CONNECTION "user=${PGUSER} password=${PGPASSWORD} dbname=${PGDATABASE} host=${PGHOST}"
    DATA "geom FROM (SELECT geo.geom, geo.id,
                            geo.document, geo.type, geo.numero, geo.localisation, geo.adresse, geo.commune, geo.remarque, geo.date_controle, geo.inactif
                     FROM pompiers.pom_vgeo_cles_sdis AS geo
                     WHERE (ARRAY[%role_ids%] && ARRAY(${MAPSERVER_DATA_NOAREA_SUBSELECT} 'pom_cles'))
                    ) AS foo USING UNIQUE id USING srid=${SRID}"
    TOLERANCE ${WMS_TOLERANCE}
    DUMP TRUE
    METADATA
        "wms_title" "Clés"
        "gml_featureid" "id"
        "gml_types" "auto"
        "gml_include_items" "document,type,numero,localisation,adresse,commune,remarque,date_controle"
        "wms_srs" "${WMS_SRS}"
        "wfs_enable_request" "*"
        "ows_geometries" "geom"
        "ows_geom_type" "point"
    END
    VALIDATION
        "default_role_ids" "-1"
        "role_ids" "^-?[0-9,]*$"
    END
    MINSCALEDENOM 1
    MAXSCALEDENOM 901
    CLASSITEM "type"
    LABELITEM "numero"
    CLASS
        NAME "Clé"
        EXPRESSION "Clé"
        STYLE
            SYMBOL "pom_cle"
            SIZE 20
        END
        LABEL
            TYPE TRUETYPE
            FONT "OpenSans-Bold"
            SIZE 8
            ANTIALIAS TRUE
            COLOR 0 0 0
            OUTLINECOLOR 255 0 0
            OUTLINEWIDTH 1
            POSITION UR
            ALIGN CENTER
            OFFSET 0 3
            FORCE TRUE
        END
    END
    CLASS
        NAME "Tube"
        EXPRESSION "Tube"
        STYLE
            SYMBOL "pom_cle_tube"
            SIZE 20
        END
        LABEL
            TYPE TRUETYPE
            FONT "OpenSans-Bold"
            SIZE 8
            ANTIALIAS TRUE
            COLOR 0 0 0
            OUTLINECOLOR 255 0 0
            OUTLINEWIDTH 1
            POSITION UR
            ALIGN CENTER
            OFFSET 0 3
            FORCE TRUE
        END
    END
    CLASS
        NAME "Tube à clé"
        EXPRESSION "Tube à clé"
        STYLE
            SYMBOL "pom_cle_tube"
            SIZE 20
        END
        LABEL
            TYPE TRUETYPE
            FONT "OpenSans-Bold"
            SIZE 8
            ANTIALIAS TRUE
            COLOR 0 0 0
            OUTLINECOLOR 255 0 0
            OUTLINEWIDTH 1
            POSITION UR
            ALIGN CENTER
            OFFSET 0 3
            FORCE TRUE
        END
    END
END

LAYER
    NAME "pom_edit_cles"
    TYPE POINT
    STATUS ON
    PROJECTION "init=epsg:${SRID}" END
    EXTENT ${MAPFILE_EXTENT}
    TEMPLATE fooOnlyForWMSGetFeatureInfo
    CONNECTIONTYPE POSTGIS
    PROCESSING "CLOSE_CONNECTION=DEFER"
    CONNECTION "user=${PGUSER} password=${PGPASSWORD} dbname=${PGDATABASE} host=${PGHOST}"
    DATA "geom FROM (SELECT geo.*
                     FROM pompiers.pom_vgeo_edit_cles AS geo
                     WHERE (ARRAY[%role_ids%] && ARRAY(${MAPSERVER_DATA_NOAREA_SUBSELECT} 'pom_edit_cles'))
                    ) AS foo USING UNIQUE id USING srid=${SRID}"
    TOLERANCE ${WMS_TOLERANCE}
    DUMP TRUE
    METADATA
        "wms_title" "Clés (édition)"
        "gml_featureid" "id"
        "gml_types" "auto"
        "gml_include_items" "all"
        "gml_exclude_items" "id"
        "wms_srs" "${WMS_SRS}"
        "wfs_enable_request" "*"
        "ows_geometries" "geom"
        "ows_geom_type" "point"
    END
    VALIDATION
        "default_role_ids" "-1"
        "role_ids" "^-?[0-9,]*$"
    END
    MINSCALEDENOM 1
    MAXSCALEDENOM 180001
    CLASSITEM "type"
    CLASS
        NAME "Clé contrôlée"
        EXPRESSION ("[type]" = "Clé" && "[statut]" = "Contrôlée" && "[defectuosite]" = "Non")
        STYLE
            SYMBOL "pom_cle"
            SIZE 20
        END
        MINSCALEDENOM 1
        MAXSCALEDENOM 1801
    END
    CLASS
        NAME "Tube à clé controlé"
        EXPRESSION ("[type]" = "Tube" && "[statut]" = "Contrôlée" && "[defectuosite]" = "Non")
        STYLE
            SYMBOL "pom_cle_tube"
            SIZE 20
        END
        MINSCALEDENOM 1
        MAXSCALEDENOM 1801
    END
    CLASS
        NAME "Clé à contrôler"
        EXPRESSION ("[type]" = "Clé" && "[statut]" = "A contrôler" && "[defectuosite]" = "Non")
        STYLE
            SYMBOL "pom_edit_cle_a_controler"
            SIZE 20
        END
        MINSCALEDENOM 1
        MAXSCALEDENOM 1801
    END
    CLASS
        NAME "Tube à clé à contrôler"
        EXPRESSION ("[type]" = "Tube" && "[statut]" = "A contrôler" && "[defectuosite]" = "Non")
        STYLE
            SYMBOL "pom_edit_cle_tube_a_controler"
            SIZE 20
        END
        MINSCALEDENOM 1
        MAXSCALEDENOM 1801
    END
    CLASS
        NAME "Clé défectueuse"
        EXPRESSION ("[type]" = "Clé" && "[defectuosite]" = "Oui")
        STYLE
            SYMBOL "pom_edit_cle_defectueuse"
            SIZE 20
        END
        MINSCALEDENOM 1
        MAXSCALEDENOM 1801
    END
    CLASS
        NAME "Tube à clé défectueux"
        EXPRESSION ("[type]" = "Tube" && "[defectuosite]" = "Oui")
        STYLE
            SYMBOL "pom_edit_cle_tube_defectueux"
            SIZE 20
        END
        MINSCALEDENOM 1
        MAXSCALEDENOM 1801
    END
    CLASS
        NAME "Clé non contrôlée"
        EXPRESSION ("[type]" = "Clé" && "[statut]" = "Non contrôlée" && "[defectuosite]" = "Non")
        STYLE
            SYMBOL "pom_edit_cle_non_controlee"
            SIZE 20
        END
        MINSCALEDENOM 1
        MAXSCALEDENOM 1801
    END
    CLASS
        NAME "Tube à clé non contrôlé"
        EXPRESSION ("[type]" = "Tube" && "[statut]" = "Non contrôlée" && "[defectuosite]" = "Non")
        STYLE
            SYMBOL "pom_edit_cle_tube_non_controle"
            SIZE 20
        END
        MINSCALEDENOM 1
        MAXSCALEDENOM 1801
    END
    CLASS
        NAME "Clé contrôlée"
        EXPRESSION ("[type]" = "Clé" && "[statut]" = "Contrôlée" && "[defectuosite]" = "Non")
        STYLE
            SYMBOL "circle"
            COLOR 255 0 0
            OUTLINECOLOR 0 0 0
            SIZE 9
        END
        MINSCALEDENOM 1801
        MAXSCALEDENOM 180001
    END
    CLASS
        NAME "Tube à clé contrôlée"
        EXPRESSION ("[type]" = "Tube" && "[statut]" = "Contrôlée" && "[defectuosite]" = "Non")
        STYLE
            SYMBOL "square"
            COLOR 255 0 0
            OUTLINECOLOR 0 0 0
            SIZE 9
        END
        MINSCALEDENOM 1801
        MAXSCALEDENOM 180001
    END
    CLASS
        NAME "Clé à contrôler"
        EXPRESSION ("[type]" = "Clé" && "[statut]" = "A contrôler" && "[defectuosite]" = "Non")
        STYLE
            SYMBOL "circle"
            COLOR 247 144 70
            OUTLINECOLOR 0 0 0
            SIZE 9
        END
        MINSCALEDENOM 1801
        MAXSCALEDENOM 180001
    END
    CLASS
        NAME "Tube à clé à contrôler"
        EXPRESSION ("[type]" = "Tube" && "[statut]" = "A contrôler" && "[defectuosite]" = "Non")
        STYLE
            SYMBOL "square"
            COLOR 247 144 70
            OUTLINECOLOR 0 0 0
            SIZE 9
        END
        MINSCALEDENOM 1801
        MAXSCALEDENOM 180001
    END
    CLASS
        NAME "Clé defectueuse"
        EXPRESSION ("[type]" = "Clé" && "[defectuosite]" = "Oui")
        STYLE
            SYMBOL "circle"
            COLOR 141 160 203
            OUTLINECOLOR 0 0 0
            SIZE 9
        END
        MINSCALEDENOM 1801
        MAXSCALEDENOM 180001
    END
    CLASS
        NAME "Tube à clé défectueux"
        EXPRESSION ("[type]" = "Tube" && "[defectuosite]" = "Oui")
        STYLE
            SYMBOL "square"
            COLOR 141 160 203
            OUTLINECOLOR 0 0 0
            SIZE 9
        END
        MINSCALEDENOM 1801
        MAXSCALEDENOM 180001
    END
    CLASS
        NAME "Clé  non contrôlée"
        EXPRESSION ("[type]" = "Clé" && "[statut]" = "Non contrôlée" && "[defectuosite]" = "Non")
        STYLE
            SYMBOL "circle"
            COLOR 252 204 0
            OUTLINECOLOR 0 0 0
            SIZE 9
        END
        MINSCALEDENOM 1801
        MAXSCALEDENOM 180001
    END
    CLASS
        NAME "Tube à clé non contrôlé"
        EXPRESSION ("[type]" = "Tube" && "[statut]" = "Non contrôlée" && "[defectuosite]" = "Non")
        STYLE
            SYMBOL "square"
            COLOR 252 204 0
            OUTLINECOLOR 0 0 0
            SIZE 9
        END
        MINSCALEDENOM 1801
        MAXSCALEDENOM 180001
    END
END

LAYER
    NAME "pom_situation"
    TYPE POINT
    STATUS ON
    PROJECTION "init=epsg:${SRID}" END
    EXTENT ${MAPFILE_EXTENT}
    TEMPLATE fooOnlyForWMSGetFeatureInfo
    CONNECTIONTYPE POSTGIS
    PROCESSING "CLOSE_CONNECTION=DEFER"
    CONNECTION "user=${PGUSER} password=${PGPASSWORD} dbname=${PGDATABASE} host=${PGHOST}"
    DATA "geom FROM (SELECT geo.*
                     FROM pompiers.pom_vgeo_situation AS geo
                     WHERE (ARRAY[%role_ids%] && ARRAY(${MAPSERVER_DATA_NOAREA_SUBSELECT} 'pom_situation'))
                    ) AS foo USING UNIQUE id USING srid=${SRID}"
    TOLERANCE ${WMS_TOLERANCE}
    DUMP TRUE
    METADATA
        "wms_title" "Eléments de situation"
        "wms_srs" "${WMS_SRS}"
        "wfs_enable_request" "*"
        "gml_featureid" "id"
        "gml_types" "auto"
        "gml_include_items" "all"
        "gml_exclude_items" "id"
        "ows_geometries" "geom"
        "ows_geom_type" "point"
    END
    VALIDATION
        "default_role_ids" "-1"
        "role_ids" "^-?[0-9,]*$"
    END
    MINSCALEDENOM 1
    MAXSCALEDENOM 901
    CLASSITEM "type"
    CLASS
        NAME "Ascenseur"
        EXPRESSION "Ascenseur"
        STYLE
            SYMBOL "square"
            SIZE 20
            WIDTH 1
            COLOR 255 255 255
            OUTLINECOLOR 0 0 0
        END
        STYLE
            SYMBOL "cross"
            ANGLE 45
            SIZE 25
            WIDTH 1
            OUTLINECOLOR 0 0 0
        END
    END
END

LAYER
    NAME "pom_edit_situation"
    TYPE POINT
    STATUS ON
    PROJECTION "init=epsg:${SRID}" END
    EXTENT ${MAPFILE_EXTENT}
    TEMPLATE fooOnlyForWMSGetFeatureInfo
    CONNECTIONTYPE POSTGIS
    PROCESSING "CLOSE_CONNECTION=DEFER"
    CONNECTION "user=${PGUSER} password=${PGPASSWORD} dbname=${PGDATABASE} host=${PGHOST}"
    DATA "geom FROM (SELECT geo.*
                     FROM pompiers.pom_vgeo_edit_situation AS geo
                     WHERE (ARRAY[%role_ids%] && ARRAY(${MAPSERVER_DATA_NOAREA_SUBSELECT} 'pom_edit_situation'))
                    ) AS foo USING UNIQUE id USING srid=${SRID}"
    TOLERANCE ${WMS_TOLERANCE}
    DUMP TRUE
    METADATA
        "wms_title" "Eléments de situation (édition)"
        "wms_srs" "${WMS_SRS}"
        "wfs_enable_request" "*"
        "gml_featureid" "id"
        "gml_types" "auto"
        "gml_include_items" "all"
        "gml_exclude_items" "id"
        "ows_geometries" "geom"
        "ows_geom_type" "point"
    END
    VALIDATION
        "default_role_ids" "-1"
        "role_ids" "^-?[0-9,]*$"
    END
    MINSCALEDENOM 1
    MAXSCALEDENOM 180001
    CLASSITEM "type"
    CLASS
        NAME "Ascenseur"
        EXPRESSION "Ascenseur"
        STYLE
            SYMBOL "square"
            SIZE 20
            WIDTH 1
            COLOR 255 255 255
            OUTLINECOLOR 0 0 0
        END
        STYLE
            SYMBOL "cross"
            ANGLE 45
            SIZE 25
            WIDTH 1
            OUTLINECOLOR 0 0 0
        END
        MINSCALEDENOM 1
        MAXSCALEDENOM 1801
    END
    CLASS
        NAME "Ascenseur"
        EXPRESSION "Ascenseur"
        STYLE
            SYMBOL "square"
            SIZE 9
            WIDTH 1
            COLOR 255 255 255
            OUTLINECOLOR 0 0 0
        END
        MINSCALEDENOM 1801
        MAXSCALEDENOM 180001
    END
END

LAYER
    NAME "pom_dossiers_intervention"
    TYPE POINT
    STATUS ON
    PROJECTION "init=epsg:${SRID}" END
    EXTENT ${MAPFILE_EXTENT}
    TEMPLATE fooOnlyForWMSGetFeatureInfo
    CONNECTIONTYPE POSTGIS
    PROCESSING "CLOSE_CONNECTION=DEFER"
    CONNECTION "user=${PGUSER} password=${PGPASSWORD} dbname=${PGDATABASE} host=${PGHOST}"
    DATA "geom FROM (SELECT geo.geom, geo.id,
                            geo.document, geo.localisation, geo.adresse, geo.commune, geo.statut, geo.remarque
                     FROM pompiers.pom_vgeo_dossiers_intervention_sdis AS geo
                     WHERE (ARRAY[%role_ids%] && ARRAY(${MAPSERVER_DATA_NOAREA_SUBSELECT} 'pom_dossiers_intervention'))
                    ) AS foo USING UNIQUE id USING srid=${SRID}"
    TOLERANCE ${WMS_TOLERANCE}
    DUMP TRUE
    METADATA
        "wms_title" "Dossiers d'intervention"
        "gml_featureid" "id"
        "gml_types" "auto"
        "gml_include_items" "document,localisation,adresse,commune,statut,remarque"
        "wms_srs" "${WMS_SRS}"
        "wfs_enable_request" "*"
        "ows_geometries" "geom"
        "ows_geom_type" "point"
    END
    VALIDATION
        "default_role_ids" "-1"
        "role_ids" "^-?[0-9,]*$"
    END
    MINSCALEDENOM 1
    MAXSCALEDENOM 901
    CLASS
        NAME "Dossiers d'intervention"
        STYLE
            SYMBOL "pom_dossier_intervention"
            SIZE 20
        END
        LABEL
            EXPRESSION ('[affichage_localisation]' = 'true')
            TEXT "[localisation]"
            TYPE TRUETYPE
            FONT "OpenSans-Bold"
            SIZE 9
            ANTIALIAS TRUE
            COLOR 0 75 150
            POSITION LC
            ALIGN CENTER
            OFFSET 0 5
            FORCE TRUE
        END
    END
END

LAYER
    NAME "pom_edit_dossiers_intervention"
    TYPE POINT
    STATUS ON
    PROJECTION "init=epsg:${SRID}" END
    EXTENT ${MAPFILE_EXTENT}
    TEMPLATE fooOnlyForWMSGetFeatureInfo
    CONNECTIONTYPE POSTGIS
    PROCESSING "CLOSE_CONNECTION=DEFER"
    CONNECTION "user=${PGUSER} password=${PGPASSWORD} dbname=${PGDATABASE} host=${PGHOST}"
    DATA "geom FROM (SELECT geo.*
                     FROM pompiers.pom_vgeo_edit_dossiers_intervention AS geo
                     WHERE (ARRAY[%role_ids%] && ARRAY(${MAPSERVER_DATA_NOAREA_SUBSELECT} 'pom_edit_dossiers_intervention'))
                    ) AS foo USING UNIQUE id USING srid=${SRID}"
    TOLERANCE ${WMS_TOLERANCE}
    DUMP TRUE
    METADATA
        "wms_title" "Dossiers d'intervention (édition)"
        "gml_featureid" "id"
        "gml_types" "auto"
        "gml_include_items" "document,statut,localisation,adresse,commune,remarque"
        "wms_srs" "${WMS_SRS}"
        "wfs_enable_request" "*"
        "ows_geometries" "geom"
        "ows_geom_type" "point"
    END
    VALIDATION
        "default_role_ids" "-1"
        "role_ids" "^-?[0-9,]*$"
    END
    MINSCALEDENOM 1
    MAXSCALEDENOM 180001
    CLASS
        NAME "Dossiers d'intervention"
        STYLE
            SYMBOL "pom_dossier_intervention"
            SIZE 20
        END
        LABEL
            EXPRESSION ('[affichage_localisation]' = 'true')
            TEXT "[localisation]"
            TYPE TRUETYPE
            FONT "OpenSans-Bold"
            SIZE 9
            ANTIALIAS TRUE
            COLOR 0 75 150
            POSITION LC
            ALIGN CENTER
            OFFSET 0 5
            FORCE TRUE
        END
        MINSCALEDENOM 1
        MAXSCALEDENOM 1801
    END
    CLASS
        NAME "Dossiers d'intervention"
        STYLE
            SYMBOL "square"
            COLOR 0 75 150
            OUTLINECOLOR 255 255 255
            SIZE 9
        END
        MINSCALEDENOM 1801
        MAXSCALEDENOM 180001
    END
END

LAYER
    NAME "pom_batiments"
    TYPE POLYGON
    STATUS ON
    PROJECTION "init=epsg:${SRID}" END
    EXTENT ${MAPFILE_EXTENT}
    TEMPLATE fooOnlyForWMSGetFeatureInfo
    CONNECTIONTYPE POSTGIS
    PROCESSING "CLOSE_CONNECTION=DEFER"
    CONNECTION "user=${PGUSER} password=${PGPASSWORD} dbname=${PGDATABASE} host=${PGHOST}"
    DATA "geom FROM (SELECT geo.geom, geo.id
                     FROM pompiers.pom_vgeo_batiments AS geo
                     WHERE (ARRAY[%role_ids%] && ARRAY(${MAPSERVER_DATA_NOAREA_SUBSELECT} 'pom_batiments'))
                    ) AS foo USING UNIQUE id USING srid=${SRID}"
    TOLERANCE ${WMS_TOLERANCE}
    DUMP TRUE
    METADATA
        "wms_title" "Bâtiments"
        "gml_featureid" "id"
        "gml_types" "auto"
        "gml_include_items" ""
        "wms_srs" "${WMS_SRS}"
        "wfs_enable_request" "*"
        "ows_geometries" "geom"
        "ows_geom_type" "multipolygon"
    END
    VALIDATION
        "default_role_ids" "-1"
        "role_ids" "^-?[0-9,]*$"
    END
    MINSCALEDENOM 1
    MAXSCALEDENOM 36001
    CLASS
        NAME "Bâtiments"
        STYLE
            OUTLINECOLOR 0 0 0
            WIDTH 2.5
        END
        MINSCALEDENOM 1
        MAXSCALEDENOM 3601
    END
    CLASS
        NAME "Bâtiments"
        STYLE
            OUTLINECOLOR 0 0 0
            WIDTH 1
        END
        MINSCALEDENOM 3601
        MAXSCALEDENOM 36001
    END
END

LAYER
    NAME "pom_acces"
    TYPE LINE
    STATUS ON
    PROJECTION "init=epsg:${SRID}" END
    EXTENT ${MAPFILE_EXTENT}
    TEMPLATE fooOnlyForWMSGetFeatureInfo
    CONNECTIONTYPE POSTGIS
    PROCESSING "CLOSE_CONNECTION=DEFER"
    CONNECTION "user=${PGUSER} password=${PGPASSWORD} dbname=${PGDATABASE} host=${PGHOST}"
    DATA "geom FROM (SELECT geo.geom, geo.id,
                            geo.photo AS photo_empty, geo.type, geo.localisation, geo.adresse, geo.remarque
                     FROM pompiers.pom_vgeo_acces AS geo
                     WHERE (ARRAY[%role_ids%] && ARRAY(${MAPSERVER_DATA_NOAREA_SUBSELECT} 'pom_acces'))
                    ) AS foo USING UNIQUE id USING srid=${SRID}"
    TOLERANCE ${WMS_TOLERANCE}
    DUMP TRUE
    METADATA
        "wms_title" "Accès"
        "gml_featureid" "id"
        "gml_types" "auto"
        "gml_include_items" "type,localisation,adresse,photo_empty,remarque"
        "wms_srs" "${WMS_SRS}"
        "wfs_enable_request" "*"
        "ows_geometries" "geom"
        "ows_geom_type" "multiline"
    END
    VALIDATION
        "default_role_ids" "-1"
        "role_ids" "^-?[0-9,]*$"
    END
    MINSCALEDENOM 1
    MAXSCALEDENOM 1801
    CLASSITEM "type"
    CLASS
        NAME "Véhicule"
        EXPRESSION "Véhicule"
        STYLE
            SYMBOL "circle"
            SIZE 7.5
            COLOR 255 0 0
            GAP 15
        END
        STYLE
            GEOMTRANSFORM "end"
            SYMBOL "triangle2"
            SIZE 20
            COLOR 255 0 0
            ANGLE AUTO
        END
    END
    CLASS
        NAME "Reconnaissance"
        EXPRESSION "Reconnaissance"
        STYLE
            SYMBOL "circle"
            SIZE 7.5
            COLOR 0 127 0
            GAP 15
        END
        STYLE
            GEOMTRANSFORM "end"
            SYMBOL "triangle2"
            SIZE 20
            COLOR 0 127 0
            ANGLE AUTO
        END
    END
    CLASS
        NAME "Echelle"
        EXPRESSION "Echelle"
        STYLE
            WIDTH 3
            COLOR 63 150 208
        END
        STYLE
            GEOMTRANSFORM "start"
            SYMBOL "circle"
            SIZE 10
            COLOR 63 150 208
        END
        STYLE
            GEOMTRANSFORM "end"
            SYMBOL "circle"
            SIZE 10
            COLOR 63 150 208
        END
    END
    CLASS
        NAME "Entrée"
        EXPRESSION "Entrée"
        STYLE
            SYMBOL "circle"
            SIZE 7.5
            COLOR 0 0 0
            GAP 15
        END
        STYLE
            GEOMTRANSFORM "end"
            SYMBOL "triangle2"
            SIZE 20
            COLOR 0 0 0
            ANGLE AUTO
        END
    END
    CLASS
        NAME "Barrage"
        EXPRESSION "Barrage"
        STYLE
            SYMBOL "circle"
            SIZE 7.5
            COLOR 255 125 0
            GAP 15
        END
        STYLE
            GEOMTRANSFORM "end"
            SYMBOL "triangle2"
            SIZE 20
            COLOR 255 125 0
            ANGLE AUTO
        END
    END
    CLASS
        NAME "Restriction circulation"
        EXPRESSION "Restriction circulation"
        STYLE
            WIDTH 15
            COLOR 255 150 150
        END
        STYLE
            SYMBOL "cross"
            SIZE 40
            WIDTH 2
            COLOR 255 0 0
            ANGLE 45
        END
    END
    CLASS
        NAME "Entrée"
        EXPRESSION "Entrée"
        STYLE
            GEOMTRANSFORM "end"
            SYMBOL "triangle2"
            SIZE 20
            COLOR 0 0 0
            OUTLINECOLOR 255 255 255
            ANGLE AUTO
        END
    END
    CLASS
        NAME "Motopompe"
        EXPRESSION "Motopompe"
        STYLE
            SYMBOL "circle"
            SIZE 7.5
            COLOR 63 150 208
            GAP 15
        END
        STYLE
            GEOMTRANSFORM "end"
            SYMBOL "triangle2"
            SIZE 20
            COLOR 63 150 208
            ANGLE AUTO
        END
        TEXT "MP"
        LABEL
            TYPE TRUETYPE
            FONT "OpenSans-Bold"
            SIZE 15
            ANTIALIAS TRUE
            COLOR 63 150 208
            ANGLE AUTO
            POSITION AUTO
            ALIGN CENTER
            OFFSET 0 5
            WRAP " "
            MAXLENGTH 15
            FORCE TRUE
        END
    END
END

LAYER
    NAME "pom_edit_acces"
    TYPE LINE
    STATUS ON
    PROJECTION "init=epsg:${SRID}" END
    EXTENT ${MAPFILE_EXTENT}
    TEMPLATE fooOnlyForWMSGetFeatureInfo
    CONNECTIONTYPE POSTGIS
    PROCESSING "CLOSE_CONNECTION=DEFER"
    CONNECTION "user=${PGUSER} password=${PGPASSWORD} dbname=${PGDATABASE} host=${PGHOST}"
    DATA "geom FROM (SELECT geo.*
                     FROM pompiers.pom_vgeo_edit_acces AS geo
                     WHERE (ARRAY[%role_ids%] && ARRAY(${MAPSERVER_DATA_NOAREA_SUBSELECT} 'pom_edit_acces'))
                    ) AS foo USING UNIQUE id USING srid=${SRID}"
    TOLERANCE ${WMS_TOLERANCE}
    DUMP TRUE
    METADATA
        "wms_title" "Accès (édition)"
        "gml_featureid" "id"
        "gml_types" "auto"
        "gml_include_items" "all"
        "gml_exclude_items" "id"
        "wms_srs" "${WMS_SRS}"
        "wfs_enable_request" "*"
        "ows_geometries" "geom"
        "ows_geom_type" "multiline"
    END
    VALIDATION
        "default_role_ids" "-1"
        "role_ids" "^-?[0-9,]*$"
    END
    MINSCALEDENOM 1
    MAXSCALEDENOM 180001
    CLASSITEM "type"
    CLASS
        NAME "Véhicule"
        EXPRESSION "Véhicule"
        STYLE
            SYMBOL "circle"
            SIZE 7.5
            COLOR 255 0 0
            GAP 15
        END
        STYLE
            GEOMTRANSFORM "end"
            SYMBOL "triangle2"
            SIZE 20
            COLOR 255 0 0
            ANGLE AUTO
        END
        MINSCALEDENOM 1
        MAXSCALEDENOM 1801
    END
    CLASS
        NAME "Véhicule"
        EXPRESSION "Véhicule"
        STYLE
            SYMBOL "circle"
            SIZE 3
            COLOR 255 0 0
            GAP 5
        END
        MINSCALEDENOM 1801
        MAXSCALEDENOM 180001
    END
    CLASS
        NAME "Reconnaissance"
        EXPRESSION "Reconnaissance"
        STYLE
            SYMBOL "circle"
            SIZE 7.5
            COLOR 0 127 0
            GAP 15
        END
        STYLE
            GEOMTRANSFORM "end"
            SYMBOL "triangle2"
            SIZE 20
            COLOR 0 127 0
            ANGLE AUTO
        END
        MINSCALEDENOM 1
        MAXSCALEDENOM 1801
    END
    CLASS
        NAME "Reconnaissance"
        EXPRESSION "Reconnaissance"
        STYLE
            SYMBOL "circle"
            SIZE 3
            COLOR 0 127 0
            GAP 5
        END
        MINSCALEDENOM 1801
        MAXSCALEDENOM 180001
    END
    CLASS
        NAME "Echelle"
        EXPRESSION "Echelle"
        STYLE
            WIDTH 3
            COLOR 63 150 208
        END
        STYLE
            GEOMTRANSFORM "start"
            SYMBOL "circle"
            SIZE 10
            COLOR 63 150 208
        END
        STYLE
            GEOMTRANSFORM "end"
            SYMBOL "circle"
            SIZE 10
            COLOR 63 150 208
        END
        MINSCALEDENOM 1
        MAXSCALEDENOM 1801
    END
    CLASS
        NAME "Echelle"
        EXPRESSION "Echelle"
        STYLE
            WIDTH 1
            COLOR 63 150 208
        END
        MINSCALEDENOM 1801
        MAXSCALEDENOM 180001
    END
    CLASS
        NAME "Entrée"
        EXPRESSION "Entrée"
        STYLE
            SYMBOL "circle"
            SIZE 7.5
            COLOR 0 0 0
            GAP 15
        END
        STYLE
            GEOMTRANSFORM "end"
            SYMBOL "triangle2"
            SIZE 20
            COLOR 0 0 0
            ANGLE AUTO
        END
        MINSCALEDENOM 1
        MAXSCALEDENOM 1801
    END
    CLASS
        NAME "Entrée"
        EXPRESSION "Entrée"
        STYLE
            SYMBOL "circle"
            SIZE 3
            COLOR 0 0 0
            GAP 5
        END
        MINSCALEDENOM 1801
        MAXSCALEDENOM 180001
    END
    CLASS
        NAME "Barrage"
        EXPRESSION "Barrage"
        STYLE
            SYMBOL "circle"
            SIZE 7.5
            COLOR 255 125 0
            GAP 15
        END
        STYLE
            GEOMTRANSFORM "end"
            SYMBOL "triangle2"
            SIZE 20
            COLOR 255 125 0
            ANGLE AUTO
        END
        MINSCALEDENOM 1
        MAXSCALEDENOM 1801
    END
    CLASS
        NAME "Barrage"
        EXPRESSION "Barrage"
        STYLE
            SYMBOL "circle"
            SIZE 3
            COLOR 255 125 0
            GAP 5
        END
        MINSCALEDENOM 1801
        MAXSCALEDENOM 180001
    END
    CLASS
        NAME "Restriction circulation"
        EXPRESSION "Restriction circulation"
        STYLE
            WIDTH 15
            COLOR 255 150 150
        END
        STYLE
            SYMBOL "cross"
            SIZE 40
            WIDTH 2
            COLOR 255 0 0
            ANGLE 45
        END
        MINSCALEDENOM 1
        MAXSCALEDENOM 1801
    END
    CLASS
        NAME "Restriction circulation"
        EXPRESSION "Restriction circulation"
        STYLE
            SYMBOL "cross"
            SIZE 8
            WIDTH 1
            COLOR 255 0 0
            ANGLE 45
        END
        MINSCALEDENOM 1801
        MAXSCALEDENOM 180001
    END
    CLASS
        NAME "Entrée"
        EXPRESSION "Entrée"
        STYLE
            SYMBOL "circle"
            SIZE 7.5
            COLOR 0 0 0
            GAP 15
        END
        STYLE
            GEOMTRANSFORM "end"
            SYMBOL "triangle2"
            SIZE 20
            COLOR 0 0 0
            OUTLINECOLOR 255 255 255
            ANGLE AUTO
        END
        MINSCALEDENOM 1
        MAXSCALEDENOM 1801
    CLASS
        NAME "Entrée"
        EXPRESSION "Entrée"
        STYLE
            SYMBOL "circle"
            SIZE 3
            COLOR 0 0 0
            GAP 5
        END
        MINSCALEDENOM 1801
        MAXSCALEDENOM 180001
    END
    CLASS
        NAME "Motopompe"
        EXPRESSION "Motopompe"
        STYLE
            SYMBOL "circle"
            SIZE 7.5
            COLOR 63 150 208
            GAP 15
        END
        STYLE
            GEOMTRANSFORM "end"
            SYMBOL "triangle2"
            SIZE 20
            COLOR 63 150 208
            ANGLE AUTO
        END
        TEXT "MP"
        LABEL
            TYPE TRUETYPE
            FONT "OpenSans-Bold"
            SIZE 15
            ANTIALIAS TRUE
            COLOR 63 150 208
            ANGLE AUTO
            POSITION AUTO
            ALIGN CENTER
            OFFSET 0 5
            WRAP " "
            MAXLENGTH 15
            FORCE TRUE
        END
        MINSCALEDENOM 1
        MAXSCALEDENOM 1801
    END
    CLASS
        NAME "Motopompe"
        EXPRESSION "Motopompe"
        STYLE
            SYMBOL "circle"
            SIZE 3
            COLOR 63 150 208
            GAP 5
        END
        MINSCALEDENOM 1801
        MAXSCALEDENOM 180001
    END
END

LAYER
    NAME "pom_emplacements"
    TYPE POINT
    STATUS ON
    PROJECTION "init=epsg:${SRID}" END
    EXTENT ${MAPFILE_EXTENT}
    TEMPLATE fooOnlyForWMSGetFeatureInfo
    CONNECTIONTYPE POSTGIS
    PROCESSING "CLOSE_CONNECTION=DEFER"
    CONNECTION "user=${PGUSER} password=${PGPASSWORD} dbname=${PGDATABASE} host=${PGHOST}"
    DATA "geom FROM (SELECT geo.*
                     FROM pompiers.pom_vgeo_emplacements AS geo
                     WHERE (ARRAY[%role_ids%] && ARRAY(${MAPSERVER_DATA_NOAREA_SUBSELECT} 'pom_emplacements'))
                    ) AS foo USING UNIQUE id USING srid=${SRID}"
    TOLERANCE ${WMS_TOLERANCE}
    DUMP TRUE
    METADATA
        "wms_title" "Emplacements des moyens d'intervention"
        "wms_srs" "${WMS_SRS}"
        "wfs_enable_request" "*"
        "gml_featureid" "id"
        "gml_types" "auto"
        "gml_include_items" "all"
        "gml_exclude_items" "id"
        "ows_geometries" "geom"
        "ows_geom_type" "point"
    END
    VALIDATION
        "default_role_ids" "-1"
        "role_ids" "^-?[0-9,]*$"
    END
    MINSCALEDENOM 1
    MAXSCALEDENOM 1801
    CLASSITEM "type"
    CLASS
        NAME "Echelle"
        EXPRESSION "Echelle"
        STYLE
            SYMBOL "pom_emplacements_echelle"
            SIZE 15
            ANGLE [orientation]
        END
        MINSCALEDENOM 1
        MAXSCALEDENOM 901
    END
    CLASS
        NAME "Echelle"
        EXPRESSION "Echelle"
        STYLE
            SYMBOL "pom_emplacements_echelle"
            SIZE 10
            ANGLE [orientation]
        END
        MINSCALEDENOM 901
        MAXSCALEDENOM 1801
    END
    CLASS
        NAME "Motopompe"
        EXPRESSION "Motopompe"
        STYLE
            SYMBOL "pom_emplacements_motopompe"
            SIZE 15
            ANGLE [orientation]
        END
        MINSCALEDENOM 1
        MAXSCALEDENOM 901
    END
    CLASS
        NAME "Motopompe"
        EXPRESSION "Motopompe"
        STYLE
            SYMBOL "pom_emplacements_motopompe"
            SIZE 10
            ANGLE [orientation]
        END
        MINSCALEDENOM 901
        MAXSCALEDENOM 1801
    END
    CLASS
        NAME "Tonne pompe"
        EXPRESSION "Tonne pompe"
        STYLE
            SYMBOL "pom_emplacements_tonne_pompe"
            SIZE 15
            ANGLE [orientation]
        END
        MINSCALEDENOM 1
        MAXSCALEDENOM 901
    END
    CLASS
        NAME "Tonne pompe"
        EXPRESSION "Tonne pompe"
        STYLE
            SYMBOL "pom_emplacements_tonne_pompe"
            SIZE 10
            ANGLE [orientation]
        END
        MINSCALEDENOM 901
        MAXSCALEDENOM 1801
    END
END

LAYER
    NAME "pom_edit_emplacements"
    TYPE POINT
    STATUS ON
    PROJECTION "init=epsg:${SRID}" END
    EXTENT ${MAPFILE_EXTENT}
    TEMPLATE fooOnlyForWMSGetFeatureInfo
    CONNECTIONTYPE POSTGIS
    PROCESSING "CLOSE_CONNECTION=DEFER"
    CONNECTION "user=${PGUSER} password=${PGPASSWORD} dbname=${PGDATABASE} host=${PGHOST}"
    DATA "geom FROM (SELECT geo.*
                     FROM pompiers.pom_vgeo_edit_emplacements AS geo
                     WHERE (ARRAY[%role_ids%] && ARRAY(${MAPSERVER_DATA_NOAREA_SUBSELECT} 'pom_edit_emplacements'))
                    ) AS foo USING UNIQUE id USING srid=${SRID}"
    TOLERANCE ${WMS_TOLERANCE}
    DUMP TRUE
    METADATA
        "wms_title" "Emplacements des moyens d'intervention (édition)"
        "wms_srs" "${WMS_SRS}"
        "wfs_enable_request" "*"
        "gml_featureid" "id"
        "gml_types" "auto"
        "gml_include_items" "all"
        "gml_exclude_items" "id"
        "ows_geometries" "geom"
        "ows_geom_type" "point"
    END
    VALIDATION
        "default_role_ids" "-1"
        "role_ids" "^-?[0-9,]*$"
    END
    MINSCALEDENOM 1
    MAXSCALEDENOM 180001
    CLASSITEM "type"
    CLASS
        NAME "Echelle"
        EXPRESSION "Echelle"
        STYLE
            SYMBOL "pom_emplacements_echelle"
            SIZE 20
            ANGLE [orientation]
        END
        MINSCALEDENOM 1
        MAXSCALEDENOM 1801
    END
    CLASS
        NAME "Motopompe"
        EXPRESSION "Motopompe"
        STYLE
            SYMBOL "pom_emplacements_motopompe"
            SIZE 20
            ANGLE [orientation]
        END
        MINSCALEDENOM 1
        MAXSCALEDENOM 1801
    END
    CLASS
        NAME "Tonne pompe"
        EXPRESSION "Tonne pompe"
        STYLE
            SYMBOL "pom_emplacements_tonne_pompe"
            SIZE 20
            ANGLE [orientation]
        END
        MINSCALEDENOM 1
        MAXSCALEDENOM 1801
    END
    CLASS
        NAME "Tonne pompe"
        STYLE
            SYMBOL "square"
            COLOR 255 255 255
            OUTLINECOLOR 0 158 227
            SIZE 9
            ANGLE [orientation]
        END
        MINSCALEDENOM 1801
        MAXSCALEDENOM 180001
    END
END

LAYER
    NAME "pom_dangers_pt"
    GROUP "pom_dangers"
    TYPE POINT
    STATUS ON
    PROJECTION "init=epsg:${SRID}" END
    EXTENT ${MAPFILE_EXTENT}
    TEMPLATE fooOnlyForWMSGetFeatureInfo
    CONNECTIONTYPE POSTGIS
    PROCESSING "CLOSE_CONNECTION=DEFER"
    CONNECTION "user=${PGUSER} password=${PGPASSWORD} dbname=${PGDATABASE} host=${PGHOST}"
    DATA "geom FROM (SELECT geo.geom, geo.id,
                            geo.photo AS photo_empty, geo.type, geo.localisation, geo.adresse, geo.document, geo.remarque
                     FROM pompiers.pom_vgeo_dangers AS geo
                     WHERE (ARRAY[%role_ids%] && ARRAY(${MAPSERVER_DATA_NOAREA_SUBSELECT} 'pom_dangers'))
                    ) AS foo USING UNIQUE id USING srid=${SRID}"
    TOLERANCE ${WMS_TOLERANCE}
    DUMP TRUE
    METADATA
        "wms_title" "Dangers"
        "wms_group_title" "Dangers"
        "wms_group_abstract" ""
        "gml_featureid" "id"
        "gml_types" "auto"
        "gml_include_items" "type,localisation,adresse,photo_empty,document,remarque"
        "wms_srs" "${WMS_SRS}"
        "wfs_enable_request" "*"
        "ows_geometries" "geom"
        "ows_geom_type" "point"
    END
    VALIDATION
        "default_role_ids" "-1"
        "role_ids" "^-?[0-9,]*$"
    END
    MINSCALEDENOM 1
    MAXSCALEDENOM 1801
    CLASSITEM "type"
    LABELITEM "remarque"
    CLASS
        NAME "Feu"
        EXPRESSION "Feu"
        STYLE
            SYMBOL "pom_danger_feu"
            SIZE 25
        END
        LABEL
            TYPE TRUETYPE
            FONT "OpenSans-Bold"
            SIZE 8
            ANTIALIAS TRUE
            COLOR 0 0 0
            OUTLINECOLOR 255 125 0
            OUTLINEWIDTH 1
            POSITION LC
            ALIGN CENTER
            OFFSET 0 5
            WRAP " "
            MAXLENGTH 15
            FORCE TRUE
        END
        MINSCALEDENOM 1
        MAXSCALEDENOM 901
    END
    CLASS
        NAME "Feu"
        EXPRESSION "Feu"
        STYLE
            SYMBOL "pom_danger_feu"
            SIZE 25
        END
        MINSCALEDENOM 901
        MAXSCALEDENOM 1801
    END
    CLASS
        NAME "Gaz"
        EXPRESSION "Gaz"
        STYLE
            SYMBOL "pom_danger_gaz"
            SIZE 25
        END
        LABEL
            TYPE TRUETYPE
            FONT "OpenSans-Bold"
            SIZE 8
            ANTIALIAS TRUE
            COLOR 0 0 0
            OUTLINECOLOR 255 125 0
            OUTLINEWIDTH 1
            POSITION LC
            ALIGN CENTER
            OFFSET 0 5
            WRAP " "
            MAXLENGTH 15
            FORCE TRUE
        END
        MINSCALEDENOM 1
        MAXSCALEDENOM 901
    END
    CLASS
        NAME "Gaz"
        EXPRESSION "Gaz"
        STYLE
            SYMBOL "pom_danger_gaz"
            SIZE 25
        END
        MINSCALEDENOM 901
        MAXSCALEDENOM 1801
    END
    CLASS
        NAME "Electrique"
        EXPRESSION "Electrique"
        STYLE
            SYMBOL "pom_danger_electrique"
            SIZE 25
        END
        LABEL
            TYPE TRUETYPE
            FONT "OpenSans-Bold"
            SIZE 8
            ANTIALIAS TRUE
            COLOR 0 0 0
            OUTLINECOLOR 255 125 0
            OUTLINEWIDTH 1
            POSITION LC
            ALIGN CENTER
            OFFSET 0 5
            WRAP " "
            MAXLENGTH 15
            FORCE TRUE
        END
        MINSCALEDENOM 1
        MAXSCALEDENOM 901
    END
    CLASS
        NAME "Electrique"
        EXPRESSION "Electrique"
        STYLE
            SYMBOL "pom_danger_electrique"
            SIZE 25
        END
        MINSCALEDENOM 901
        MAXSCALEDENOM 1801
    END
    CLASS
        NAME "Toxique"
        EXPRESSION "Toxique"
        STYLE
            SYMBOL "pom_danger_toxique"
            SIZE 25
        END
        LABEL
            TYPE TRUETYPE
            FONT "OpenSans-Bold"
            SIZE 8
            ANTIALIAS TRUE
            COLOR 0 0 0
            OUTLINECOLOR 255 125 0
            OUTLINEWIDTH 1
            POSITION LC
            ALIGN CENTER
            OFFSET 0 5
            WRAP " "
            MAXLENGTH 15
            FORCE TRUE
        END
        MINSCALEDENOM 1
        MAXSCALEDENOM 901
    END
    CLASS
        NAME "Toxique"
        EXPRESSION "Toxique"
        STYLE
            SYMBOL "pom_danger_toxique"
            SIZE 25
        END
        MINSCALEDENOM 901
        MAXSCALEDENOM 1801
    END
    CLASS
        NAME "Radioactif"
        EXPRESSION "Radioactif"
        STYLE
            SYMBOL "pom_danger_radioactif"
            SIZE 25
        END
        LABEL
            TYPE TRUETYPE
            FONT "OpenSans-Bold"
            SIZE 8
            ANTIALIAS TRUE
            COLOR 0 0 0
            OUTLINECOLOR 255 125 0
            OUTLINEWIDTH 1
            POSITION LC
            ALIGN CENTER
            OFFSET 0 5
            WRAP " "
            MAXLENGTH 15
            FORCE TRUE
        END
        MINSCALEDENOM 1
        MAXSCALEDENOM 901
    END
    CLASS
        NAME "Radioactif"
        EXPRESSION "Radioactif"
        STYLE
            SYMBOL "pom_danger_radioactif"
            SIZE 25
        END
        MINSCALEDENOM 901
        MAXSCALEDENOM 1801
    END
    CLASS
        NAME "Infectieux"
        EXPRESSION "Infectieux"
        STYLE
            SYMBOL "pom_danger_infectieux"
            SIZE 25
        END
        LABEL
            TYPE TRUETYPE
            FONT "OpenSans-Bold"
            SIZE 8
            ANTIALIAS TRUE
            COLOR 0 0 0
            OUTLINECOLOR 255 125 0
            OUTLINEWIDTH 1
            POSITION LC
            ALIGN CENTER
            OFFSET 0 5
            WRAP " "
            MAXLENGTH 15
            FORCE TRUE
        END
        MINSCALEDENOM 1
        MAXSCALEDENOM 901
    END
    CLASS
        NAME "Infectieux"
        EXPRESSION "Infectieux"
        STYLE
            SYMBOL "pom_danger_infectieux"
            SIZE 25
        END
        MINSCALEDENOM 901
        MAXSCALEDENOM 1801
    END
    CLASS
        NAME "Pollution"
        EXPRESSION "Pollution"
        STYLE
            SYMBOL "pom_danger_pollution"
            SIZE 25
        END
        LABEL
            TYPE TRUETYPE
            FONT "OpenSans-Bold"
            SIZE 8
            ANTIALIAS TRUE
            COLOR 0 0 0
            OUTLINECOLOR 255 125 0
            OUTLINEWIDTH 1
            POSITION LC
            ALIGN CENTER
            OFFSET 0 5
            WRAP " "
            MAXLENGTH 15
            FORCE TRUE
        END
        MINSCALEDENOM 1
        MAXSCALEDENOM 901
    END
    CLASS
        NAME "Pollution"
        EXPRESSION "Pollution"
        STYLE
            SYMBOL "pom_danger_pollution"
            SIZE 25
        END
        MINSCALEDENOM 901
        MAXSCALEDENOM 1801
    END
    CLASS
        NAME "Autre"
        EXPRESSION "Autre"
        STYLE
            SYMBOL "pom_danger_autre"
            SIZE 25
        END
        LABEL
            TYPE TRUETYPE
            FONT "OpenSans-Bold"
            SIZE 8
            ANTIALIAS TRUE
            COLOR 0 0 0
            OUTLINECOLOR 255 125 0
            OUTLINEWIDTH 1
            POSITION LC
            ALIGN CENTER
            OFFSET 0 5
            WRAP " "
            MAXLENGTH 15
            FORCE TRUE
        END
        MINSCALEDENOM 1
        MAXSCALEDENOM 901
    END
    CLASS
        NAME "Autre"
        EXPRESSION "Autre"
        STYLE
            SYMBOL "pom_danger_autre"
            SIZE 25
        END
        MINSCALEDENOM 901
        MAXSCALEDENOM 1801
    END
END

LAYER
    NAME "pom_dangers_lignes_ht"
    GROUP "pom_dangers"
    TYPE LINE
    STATUS ON
    PROJECTION "init=epsg:${SRID}" END
    EXTENT ${MAPFILE_EXTENT}
    TEMPLATE fooOnlyForWMSGetFeatureInfo
    CONNECTIONTYPE POSTGIS
    PROCESSING "CLOSE_CONNECTION=DEFER"
    CONNECTION "user=${PGUSER} password=${PGPASSWORD} dbname=${PGDATABASE} host=${PGHOST}"
    DATA "geom FROM (SELECT geo.geom, geo.id,
                            geo.type, geo.remarque
                     FROM pompiers.pom_dangers_lignes_ht AS geo
                     WHERE (ARRAY[%role_ids%] && ARRAY(${MAPSERVER_DATA_NOAREA_SUBSELECT} 'pom_dangers'))
                    ) AS foo USING UNIQUE id USING srid=${SRID}"
    TOLERANCE ${WMS_TOLERANCE}
    DUMP TRUE
    METADATA
        "wms_title" "Dangers (ligne HT)"
        "wms_group_title" "Dangers"
        "wms_group_abstract" ""
        "gml_featureid" "id"
        "gml_types" "auto"
        "gml_include_items" "type,remarque"
        "wms_srs" "${WMS_SRS}"
        "wfs_enable_request" "*"
        "ows_geometries" "geom"
        "ows_geom_type" "multiline"
    END
    VALIDATION
        "default_role_ids" "-1"
        "role_ids" "^-?[0-9,]*$"
    END
    MINSCALEDENOM 1
    MAXSCALEDENOM 1801
    CLASS
        NAME "Ligne HT"
        STYLE
            WIDTH 2.5
            COLOR 255 125 0
            PATTERN 20 15 END
        END
        STYLE
            SYMBOL "pom_danger_electrique"
            SIZE 25
            GAP 200
        END
    END
END

LAYER
    NAME "pom_edit_dangers"
    TYPE POINT
    STATUS ON
    PROJECTION "init=epsg:${SRID}" END
    EXTENT ${MAPFILE_EXTENT}
    TEMPLATE fooOnlyForWMSGetFeatureInfo
    CONNECTIONTYPE POSTGIS
    PROCESSING "CLOSE_CONNECTION=DEFER"
    CONNECTION "user=${PGUSER} password=${PGPASSWORD} dbname=${PGDATABASE} host=${PGHOST}"
    DATA "geom FROM (SELECT geo.*
                     FROM pompiers.pom_vgeo_edit_dangers AS geo
                     WHERE (ARRAY[%role_ids%] && ARRAY(${MAPSERVER_DATA_NOAREA_SUBSELECT} 'pom_edit_dangers'))
                    ) AS foo USING UNIQUE id USING srid=${SRID}"
    TOLERANCE ${WMS_TOLERANCE}
    DUMP TRUE
    METADATA
        "wms_title" "Dangers (édition)"
        "gml_featureid" "id"
        "gml_types" "auto"
        "gml_include_items" "all"
        "gml_exclude_items" "id,editable"
        "wms_srs" "${WMS_SRS}"
        "wfs_enable_request" "*"
        "ows_geometries" "geom"
        "ows_geom_type" "point"
    END
    VALIDATION
        "default_role_ids" "-1"
        "role_ids" "^-?[0-9,]*$"
    END
    MINSCALEDENOM 1
    MAXSCALEDENOM 180001
    CLASS
        NAME "Feu"
        EXPRESSION ("[type]"="Feu" and "[editable]"="Oui")
        STYLE
            SYMBOL "pom_danger_feu"
            SIZE 25
        END
        MINSCALEDENOM 1
        MAXSCALEDENOM 1801
    END
    CLASS
        NAME "Feu"
        EXPRESSION ("[type]"="Feu" and "[editable]"="Non")
        STYLE
            SYMBOL "pom_edit_danger_feu"
            SIZE 25
        END
        MINSCALEDENOM 1
        MAXSCALEDENOM 1801
    END
    CLASS
        NAME "Gaz"
        EXPRESSION ("[type]"="Gaz" and "[editable]"="Oui")
        STYLE
            SYMBOL "pom_danger_gaz"
            SIZE 25
        END
        MINSCALEDENOM 1
        MAXSCALEDENOM 1801
    END
    CLASS
        NAME "Gaz"
        EXPRESSION ("[type]"="Gaz" and "[editable]"="Non")
        STYLE
            SYMBOL "pom_edit_danger_gaz"
            SIZE 25
        END
        MINSCALEDENOM 1
        MAXSCALEDENOM 1801
    END
    CLASS
        NAME "Electrique"
        EXPRESSION ("[type]"="Electrique" and "[editable]"="Oui")
        STYLE
            SYMBOL "pom_danger_electrique"
            SIZE 25
        END
        MINSCALEDENOM 1
        MAXSCALEDENOM 1801
    END
    CLASS
        NAME "Electrique"
        EXPRESSION ("[type]"="Electrique" and "[editable]"="Non")
        STYLE
            SYMBOL "pom_edit_danger_electrique"
            SIZE 25
        END
        MINSCALEDENOM 1
        MAXSCALEDENOM 1801
    END
    CLASS
        NAME "Toxique"
        EXPRESSION ("[type]"="Toxique" and "[editable]"="Oui")
        STYLE
            SYMBOL "pom_danger_toxique"
            SIZE 25
        END
        MINSCALEDENOM 1
        MAXSCALEDENOM 1801
    END
    CLASS
        NAME "Toxique"
        EXPRESSION ("[type]"="Toxique" and "[editable]"="Non")
        STYLE
            SYMBOL "pom_edit_danger_toxique"
            SIZE 25
        END
        MINSCALEDENOM 1
        MAXSCALEDENOM 1801
    END
    CLASS
        NAME "Radioactif"
        EXPRESSION ("[type]"="Radioactif" and "[editable]"="Oui")
        STYLE
            SYMBOL "pom_danger_radioactif"
            SIZE 25
        END
        MINSCALEDENOM 1
        MAXSCALEDENOM 1801
    END
    CLASS
        NAME "Radioactif"
        EXPRESSION ("[type]"="Radioactif" and "[editable]"="Non")
        STYLE
            SYMBOL "pom_edit_danger_radioactif"
            SIZE 25
        END
        MINSCALEDENOM 1
        MAXSCALEDENOM 1801
    END
    CLASS
        NAME "Infectieux"
        EXPRESSION ("[type]"="Infectieux" and "[editable]"="Oui")
        STYLE
            SYMBOL "pom_danger_infectieux"
            SIZE 25
        END
        MINSCALEDENOM 1
        MAXSCALEDENOM 1801
    END
    CLASS
        NAME "Infectieux"
        EXPRESSION ("[type]"="Infectieux" and "[editable]"="Non")
        STYLE
            SYMBOL "pom_edit_danger_infectieux"
            SIZE 25
        END
        MINSCALEDENOM 1
        MAXSCALEDENOM 1801
    END
    CLASS
        NAME "Pollution"
        EXPRESSION ("[type]"="Pollution" and "[editable]"="Oui")
        STYLE
            SYMBOL "pom_danger_pollution"
            SIZE 25
        END
        MINSCALEDENOM 1
        MAXSCALEDENOM 1801
    END
    CLASS
        NAME "Pollution"
        EXPRESSION ("[type]"="Pollution" and "[editable]"="Non")
        STYLE
            SYMBOL "pom_edit_danger_pollution"
            SIZE 25
        END
        MINSCALEDENOM 1
        MAXSCALEDENOM 1801
    END
    CLASS
        NAME "Autre"
        EXPRESSION ("[type]"="Autre" and "[editable]"="Oui")
        STYLE
            SYMBOL "pom_danger_autre"
            SIZE 25
        END
        MINSCALEDENOM 1
        MAXSCALEDENOM 1801
    END
    CLASS
        NAME "Autre"
        EXPRESSION ("[type]"="Autre" and "[editable]"="Non")
        STYLE
            SYMBOL "pom_edit_danger_autre"
            SIZE 25
        END
        MINSCALEDENOM 1
        MAXSCALEDENOM 1801
    END
    CLASS
        NAME "Dangers"
        EXPRESSION ("[editable]" = "Oui")
        STYLE
            SYMBOL "triangle"
            COLOR 255 125 0
            OUTLINECOLOR 255 255 255
            SIZE 10
        END
        MINSCALEDENOM 1801
        MAXSCALEDENOM 180001
    END
    CLASS
        NAME "Dangers (non éditable)"
        EXPRESSION ("[editable]" = "Non")
        STYLE
            SYMBOL "triangle"
            COLOR 150 150 150
            OUTLINECOLOR 255 255 255
            SIZE 10
        END
        MINSCALEDENOM 1801
        MAXSCALEDENOM 180001
    END
END

LAYER
    NAME "pom_risques"
    TYPE POINT
    STATUS ON
    PROJECTION "init=epsg:${SRID}" END
    EXTENT ${MAPFILE_EXTENT}
    TEMPLATE fooOnlyForWMSGetFeatureInfo
    CONNECTIONTYPE POSTGIS
    PROCESSING "CLOSE_CONNECTION=DEFER"
    CONNECTION "user=${PGUSER} password=${PGPASSWORD} dbname=${PGDATABASE} host=${PGHOST}"
    DATA "geom FROM (SELECT geo.geom, geo.id,
                            geo.photo AS photo_empty, geo.type, geo.localisation, geo.adresse, geo.document, geo.remarque
                     FROM pompiers.pom_vgeo_risques AS geo
                     WHERE (ARRAY[%role_ids%] && ARRAY(${MAPSERVER_DATA_NOAREA_SUBSELECT} 'pom_risques'))
                    ) AS foo USING UNIQUE id USING srid=${SRID}"
    TOLERANCE ${WMS_TOLERANCE}
    DUMP TRUE
    METADATA
        "wms_title" "Risques"
        "gml_featureid" "id"
        "gml_types" "auto"
        "gml_include_items" "type,localisation,adresse,photo_empty,document,remarque"
        "wms_srs" "${WMS_SRS}"
        "wfs_enable_request" "*"
        "ows_geometries" "geom"
        "ows_geom_type" "point"
    END
    VALIDATION
        "default_role_ids" "-1"
        "role_ids" "^-?[0-9,]*$"
    END
    MINSCALEDENOM 1
    MAXSCALEDENOM 1801
    CLASSITEM "type"
    LABELITEM "remarque"
    CLASS
        NAME "Risque"
        EXPRESSION ("[type]" != "Bâtiment isolé")
        STYLE
            SYMBOL "pom_risque"
            SIZE 25
        END
        LABEL
            TYPE TRUETYPE
            FONT "OpenSans-Bold"
            SIZE 8
            ANTIALIAS TRUE
            COLOR 0 0 0
            OUTLINECOLOR 255 220 0
            OUTLINEWIDTH 1
            POSITION LC
            ALIGN CENTER
            OFFSET 0 5
            WRAP " "
            MAXLENGTH 15
            FORCE TRUE
        END
        MINSCALEDENOM 1
        MAXSCALEDENOM 901
    END
    CLASS
        NAME "Risque"
        EXPRESSION ("[type]" != "Bâtiment isolé")
        STYLE
            SYMBOL "pom_risque"
            SIZE 25
        END
        MINSCALEDENOM 901
        MAXSCALEDENOM 1801
    END
    CLASS
        NAME "Bâtiment isolé"
        EXPRESSION ("[type]" = "Bâtiment isolé")
        STYLE
            SYMBOL "pom_risque_hydraulique"
            SIZE 25
        END
        LABEL
            TYPE TRUETYPE
            FONT "OpenSans-Bold"
            SIZE 8
            ANTIALIAS TRUE
            COLOR 0 0 0
            OUTLINECOLOR 50 180 255
            OUTLINEWIDTH 1
            POSITION LC
            ALIGN CENTER
            OFFSET 0 5
            WRAP " "
            MAXLENGTH 15
            FORCE TRUE
        END
        MINSCALEDENOM 1
        MAXSCALEDENOM 901
    END
    CLASS
        NAME "Bâtiment isolé"
        EXPRESSION ("[type]" = "Bâtiment isolé")
        STYLE
            SYMBOL "pom_risque_hydraulique"
            SIZE 25
        END
        MINSCALEDENOM 901
        MAXSCALEDENOM 1801
    END
END

LAYER
    NAME "pom_edit_risques"
    TYPE POINT
    STATUS ON
    PROJECTION "init=epsg:${SRID}" END
    EXTENT ${MAPFILE_EXTENT}
    TEMPLATE fooOnlyForWMSGetFeatureInfo
    CONNECTIONTYPE POSTGIS
    PROCESSING "CLOSE_CONNECTION=DEFER"
    CONNECTION "user=${PGUSER} password=${PGPASSWORD} dbname=${PGDATABASE} host=${PGHOST}"
    DATA "geom FROM (SELECT geo.*
                     FROM pompiers.pom_vgeo_edit_risques AS geo
                     WHERE (ARRAY[%role_ids%] && ARRAY(${MAPSERVER_DATA_NOAREA_SUBSELECT} 'pom_edit_risques'))
                    ) AS foo USING UNIQUE id USING srid=${SRID}"
    TOLERANCE ${WMS_TOLERANCE}
    DUMP TRUE
    METADATA
        "wms_title" "Risques (édition)"
        "gml_featureid" "id"
        "gml_types" "auto"
        "gml_include_items" "all"
        "gml_exclude_items" "id,editable"
        "wms_srs" "${WMS_SRS}"
        "wfs_enable_request" "*"
        "ows_geometries" "geom"
        "ows_geom_type" "point"
    END
    VALIDATION
        "default_role_ids" "-1"
        "role_ids" "^-?[0-9,]*$"
    END
    MINSCALEDENOM 1
    MAXSCALEDENOM 180001
    CLASSITEM "type"
    CLASS
        NAME "Risque"
        EXPRESSION ("[type]" != "Bâtiment isolé" and "[editable]"="Oui")
        STYLE
            SYMBOL "pom_risque"
            SIZE 25
        END
        MINSCALEDENOM 1
        MAXSCALEDENOM 1801
    END
    CLASS
        NAME "Bâtiment isolé"
        EXPRESSION ("[type]" = "Bâtiment isolé" and "[editable]"="Oui")
        STYLE
            SYMBOL "pom_risque_hydraulique"
            SIZE 25
        END
        MINSCALEDENOM 1
        MAXSCALEDENOM 1801
    END
    CLASS
        NAME "Non éditable"
        EXPRESSION ("[editable]"="Non")
        STYLE
            SYMBOL "pom_edit_risque"
            SIZE 25
        END
        MINSCALEDENOM 1
        MAXSCALEDENOM 1801
    END
    CLASS
        NAME "Risque"
        EXPRESSION ("[type]" != "Bâtiment isolé" and "[editable]" = "Oui")
        STYLE
            SYMBOL "triangle"
            COLOR 255 220 0
            OUTLINECOLOR 255 255 255
            SIZE 10
        END
        MINSCALEDENOM 1801
        MAXSCALEDENOM 180001
    END
    CLASS
        NAME "Bâtiment isolé"
        EXPRESSION ("[type]" = "Bâtiment isolé" and [editable]" = "Oui")
        STYLE
            SYMBOL "triangle"
            COLOR 50 180 255
            OUTLINECOLOR 255 255 255
            SIZE 10
        END
        MINSCALEDENOM 1801
        MAXSCALEDENOM 180001
    END
    CLASS
        NAME "Risque (non éditable)"
        EXPRESSION ("[editable]" = "Non")
        STYLE
            SYMBOL "triangle"
            COLOR 150 150 150
            OUTLINECOLOR 255 255 255
            SIZE 10
        END
        MINSCALEDENOM 1801
        MAXSCALEDENOM 180001
    END
END

LAYER
    NAME "pom_dangers_lignes_ht_10"
    TYPE POLYGON
    STATUS ON
    PROJECTION "init=epsg:${SRID}" END
    EXTENT ${MAPFILE_EXTENT}
    TEMPLATE fooOnlyForWMSGetFeatureInfo
    CONNECTIONTYPE POSTGIS
    PROCESSING "CLOSE_CONNECTION=DEFER"
    CONNECTION "user=${PGUSER} password=${PGPASSWORD} dbname=${PGDATABASE} host=${PGHOST}"
    DATA "geom FROM (SELECT geo.geom, geo.id
                     FROM pompiers.pom_dangers_lignes_ht_10 AS geo
                     WHERE (ARRAY[%role_ids%] && ARRAY(${MAPSERVER_DATA_NOAREA_SUBSELECT} 'pom_dangers_lignes_ht_10'))
                    ) AS foo USING UNIQUE id USING srid=${SRID}"
    TOLERANCE ${WMS_TOLERANCE}
    DUMP TRUE
    METADATA
        "wms_title" "Zones de danger ligne HT"
        "gml_featureid" "id"
        "gml_types" "auto"
        "gml_include_items" ""
        "wms_srs" "${WMS_SRS}"
        "wfs_enable_request" "*"
        "ows_geometries" "geom"
        "ows_geom_type" "multipolygon"
    END
    VALIDATION
        "default_role_ids" "-1"
        "role_ids" "^-?[0-9,]*$"
    END
    MINSCALEDENOM 1
    MAXSCALEDENOM 1801
    CLASS
        NAME "Zone de danger ligne HT"
        STYLE
            COLOR 255 125 0
            OPACITY 30
        END
    END
END

LAYER
    NAME "pom_bornes_hydrantes"
    TYPE POINT
    STATUS ON
    PROJECTION "init=epsg:${SRID}" END
    EXTENT ${MAPFILE_EXTENT}
    TEMPLATE fooOnlyForWMSGetFeatureInfo
    CONNECTIONTYPE POSTGIS
    PROCESSING "CLOSE_CONNECTION=DEFER"
    CONNECTION "user=${PGUSER} password=${PGPASSWORD} dbname=${PGDATABASE} host=${PGHOST}"
    DATA "geom FROM (SELECT geo.*
                     FROM pompiers.pom_bornes_hydrantes AS geo
                     WHERE (ARRAY[%role_ids%] && ARRAY(${MAPSERVER_DATA_NOAREA_SUBSELECT} 'pom_bornes_hydrantes'))
                    ) AS foo USING UNIQUE id USING srid=${SRID}"
    TOLERANCE ${WMS_TOLERANCE}
    DUMP TRUE
    METADATA
        "wms_title" "Bornes hydrantes"
        "gml_featureid" "id"
        "gml_types" "auto"
        "gml_include_items" "type,numero,sortie,pression,debit,remarque,statut"
        "wms_srs" "${WMS_SRS}"
        "wfs_enable_request" "*"
        "ows_geometries" "geom"
        "ows_geom_type" "point"
    END
    VALIDATION
        "default_role_ids" "-1"
        "role_ids" "^-?[0-9,]*$"
    END
    MINSCALEDENOM 1
    MAXSCALEDENOM 3601
    LABELITEM "numero"
    CLASS
        NAME "Hors-sol"
        EXPRESSION ("[type]" = "Hors-sol" AND "[statut]" != "Hors service")
        STYLE
            SYMBOL "pom_borne_hydrante"
            SIZE 13
        END
        LABEL
            TYPE TRUETYPE
            FONT "OpenSans-Bold"
            SIZE 8
            ANTIALIAS TRUE
            COLOR 255 255 255
            OUTLINECOLOR 0 120 190
            OUTLINEWIDTH 1
            POSITION UR
            ALIGN CENTER
            OFFSET 0 3
            FORCE TRUE
        END
    END
    CLASS
        NAME "Souterraine"
        EXPRESSION ("[type]" = "Souterraine" AND "[statut]" != "Hors service")
        STYLE
            SYMBOL "pom_borne_hydrante_souterraine"
            SIZE 13
        END
        LABEL
            TYPE TRUETYPE
            FONT "OpenSans-Bold"
            SIZE 8
            ANTIALIAS TRUE
            COLOR 255 255 255
            OUTLINECOLOR 0 120 190
            OUTLINEWIDTH 1
            POSITION UR
            ALIGN CENTER
            OFFSET 0 3
            FORCE TRUE
        END
    END
    CLASS
        NAME "Hors service"
        EXPRESSION ("[statut]" = "Hors service")
        STYLE
            SYMBOL "pom_borne_hydrante_hors_service"
            SIZE 13
        END
        LABEL
            TYPE TRUETYPE
            FONT "OpenSans-Bold"
            SIZE 8
            ANTIALIAS TRUE
            COLOR 255 255 255
            OUTLINECOLOR 0 120 190
            OUTLINEWIDTH 1
            POSITION UR
            ALIGN CENTER
            OFFSET 0 3
            FORCE TRUE
        END
    END
END

LAYER
    NAME "pom_bornes_hydrantes_080"
    TYPE POLYGON
    STATUS ON
    PROJECTION "init=epsg:${SRID}" END
    EXTENT ${MAPFILE_EXTENT}
    TEMPLATE fooOnlyForWMSGetFeatureInfo
    CONNECTIONTYPE POSTGIS
    PROCESSING "CLOSE_CONNECTION=DEFER"
    CONNECTION "user=${PGUSER} password=${PGPASSWORD} dbname=${PGDATABASE} host=${PGHOST}"
    DATA "geom FROM (SELECT geo.geom, geo.id
                     FROM pompiers.pom_bornes_hydrantes_080 AS geo
                     WHERE (ARRAY[%role_ids%] && ARRAY(${MAPSERVER_DATA_NOAREA_SUBSELECT} 'pom_bornes_hydrantes_080'))
                    ) AS foo USING UNIQUE id USING srid=${SRID}"
    TOLERANCE ${WMS_TOLERANCE}
    DUMP TRUE
    METADATA
        "wms_title" "Périmètre BH (80 m)"
        "gml_featureid" "id"
        "gml_types" "auto"
        "gml_include_items" ""
        "wms_srs" "${WMS_SRS}"
        "wfs_enable_request" "*"
        "ows_geometries" "geom"
        "ows_geom_type" "multipolygon"
    END
    VALIDATION
        "default_role_ids" "-1"
        "role_ids" "^-?[0-9,]*$"
    END
    MINSCALEDENOM 1
    MAXSCALEDENOM 180001
    CLASS
        NAME "Périmètre BH (80 m)"
        STYLE
            COLOR 0 118 189
            OPACITY 30
        END
    END
END

LAYER
    NAME "pom_bornes_hydrantes_500"
    TYPE POLYGON
    STATUS ON
    PROJECTION "init=epsg:${SRID}" END
    EXTENT ${MAPFILE_EXTENT}
    TEMPLATE fooOnlyForWMSGetFeatureInfo
    CONNECTIONTYPE POSTGIS
    PROCESSING "CLOSE_CONNECTION=DEFER"
    CONNECTION "user=${PGUSER} password=${PGPASSWORD} dbname=${PGDATABASE} host=${PGHOST}"
    DATA "geom FROM (SELECT geo.geom, geo.id
                     FROM pompiers.pom_bornes_hydrantes_500 AS geo
                     WHERE (ARRAY[%role_ids%] && ARRAY(${MAPSERVER_DATA_NOAREA_SUBSELECT} 'pom_bornes_hydrantes_500'))
                    ) AS foo USING UNIQUE id USING srid=${SRID}"
    TOLERANCE ${WMS_TOLERANCE}
    DUMP TRUE
    METADATA
        "wms_title" "Périmètre BH (500 m)"
        "gml_featureid" "id"
        "gml_types" "auto"
        "gml_include_items" ""
        "wms_srs" "${WMS_SRS}"
        "wfs_enable_request" "*"
        "ows_geometries" "geom"
        "ows_geom_type" "multipolygon"
    END
    VALIDATION
        "default_role_ids" "-1"
        "role_ids" "^-?[0-9,]*$"
    END
    MINSCALEDENOM 1
    MAXSCALEDENOM 180001
    CLASS
        NAME "Périmètre BH (500 m)"
        STYLE
            COLOR 0 118 189
            OPACITY 10
        END
    END
END

LAYER
    NAME "pom_puits_reservoirs"
    TYPE POINT
    STATUS ON
    PROJECTION "init=epsg:${SRID}" END
    EXTENT ${MAPFILE_EXTENT}
    TEMPLATE fooOnlyForWMSGetFeatureInfo
    CONNECTIONTYPE POSTGIS
    PROCESSING "CLOSE_CONNECTION=DEFER"
    CONNECTION "user=${PGUSER} password=${PGPASSWORD} dbname=${PGDATABASE} host=${PGHOST}"
    DATA "geom FROM (SELECT geo.*
                     FROM pompiers.pom_vgeo_puits_reservoirs AS geo
                     WHERE (ARRAY[%role_ids%] && ARRAY(${MAPSERVER_DATA_NOAREA_SUBSELECT} 'pom_puits_reservoirs'))
                    ) AS foo USING UNIQUE id USING srid=${SRID}"
    TOLERANCE ${WMS_TOLERANCE}
    DUMP TRUE
    METADATA
        "wms_title" "Puits et réservoirs"
        "wms_srs" "${WMS_SRS}"
        "wfs_enable_request" "*"
        "gml_featureid" "id"
        "gml_types" "auto"
        "gml_include_items" "all"
        "gml_exclude_items" "id"
        "ows_geometries" "geom"
        "ows_geom_type" "point"
    END
    VALIDATION
        "default_role_ids" "-1"
        "role_ids" "^-?[0-9,]*$"
    END
    MINSCALEDENOM 1
    MAXSCALEDENOM 1801
    CLASSITEM "type"
    CLASS
        NAME "Commande réservoir"
        EXPRESSION "Commande réservoir"
        STYLE
            SYMBOL "pom_puits_reservoirs_commande_reservoir"
            SIZE 25
        END
    END
    CLASS
        NAME "Puit"
        EXPRESSION "Puit"
        STYLE
            SYMBOL "pom_puits_reservoirs_puit"
            SIZE 20
        END
    END
    CLASS
        NAME "Réservoir"
        EXPRESSION "Réservoir"
        STYLE
            SYMBOL "pom_puits_reservoirs_reservoir"
            SIZE 20
        END
    END
END

LAYER
    NAME "pom_edit_puits_reservoirs"
    TYPE POINT
    STATUS ON
    PROJECTION "init=epsg:${SRID}" END
    EXTENT ${MAPFILE_EXTENT}
    TEMPLATE fooOnlyForWMSGetFeatureInfo
    CONNECTIONTYPE POSTGIS
    PROCESSING "CLOSE_CONNECTION=DEFER"
    CONNECTION "user=${PGUSER} password=${PGPASSWORD} dbname=${PGDATABASE} host=${PGHOST}"
    DATA "geom FROM (SELECT geo.*
                     FROM pompiers.pom_vgeo_edit_puits_reservoirs AS geo
                     WHERE (ARRAY[%role_ids%] && ARRAY(${MAPSERVER_DATA_NOAREA_SUBSELECT} 'pom_edit_puits_reservoirs'))
                    ) AS foo USING UNIQUE id USING srid=${SRID}"
    TOLERANCE ${WMS_TOLERANCE}
    DUMP TRUE
    METADATA
        "wms_title" "Puits et réservoirs (édition)"
        "wms_srs" "${WMS_SRS}"
        "wfs_enable_request" "*"
        "gml_featureid" "id"
        "gml_types" "auto"
        "gml_include_items" "all"
        "gml_exclude_items" "id"
        "ows_geometries" "geom"
        "ows_geom_type" "point"
    END
    VALIDATION
        "default_role_ids" "-1"
        "role_ids" "^-?[0-9,]*$"
    END
    MINSCALEDENOM 1
    MAXSCALEDENOM 180001
    CLASSITEM "type"
    CLASS
        NAME "Commande réservoir"
        EXPRESSION "Commande réservoir"
        STYLE
            SYMBOL "pom_puits_reservoirs_commande_reservoir"
            SIZE 20
        END
        MINSCALEDENOM 1
        MAXSCALEDENOM 1801
    END
    CLASS
        NAME "Puit"
        EXPRESSION "Puit"
        STYLE
            SYMBOL "pom_puits_reservoirs_puit"
            SIZE 20
        END
        MINSCALEDENOM 1
        MAXSCALEDENOM 1801
    END
    CLASS
        NAME "Réservoir"
        STYLE
            SYMBOL "pom_puits_reservoirs_reservoir"
            SIZE 20
        END
        MINSCALEDENOM 1
        MAXSCALEDENOM 1801
    END
    CLASS
        NAME "Puits, réservoirs"
        STYLE
            SYMBOL "circle"
            COLOR 50 180 255
            OUTLINECOLOR 255 255 255
            SIZE 9
        END
        MINSCALEDENOM 1801
        MAXSCALEDENOM 180001
    END
END

LAYER
    NAME "pom_tuyaux"
    TYPE LINE
    STATUS ON
    PROJECTION "init=epsg:${SRID}" END
    EXTENT ${MAPFILE_EXTENT}
    TEMPLATE fooOnlyForWMSGetFeatureInfo
    CONNECTIONTYPE POSTGIS
    PROCESSING "CLOSE_CONNECTION=DEFER"
    CONNECTION "user=${PGUSER} password=${PGPASSWORD} dbname=${PGDATABASE} host=${PGHOST}"
    DATA "geom FROM (SELECT geo.*
                     FROM pompiers.pom_vgeo_tuyaux AS geo
                     WHERE (ARRAY[%role_ids%] && ARRAY(${MAPSERVER_DATA_NOAREA_SUBSELECT} 'pom_tuyaux'))
                    ) AS foo USING UNIQUE id USING srid=${SRID}"
    TOLERANCE ${WMS_TOLERANCE}
    DUMP TRUE
    METADATA
        "wms_title" "Transport d'eau"
        "gml_featureid" "id"
        "gml_types" "auto"
        "gml_include_items" "all"
        "gml_exclude_items" "id"
        "wms_srs" "${WMS_SRS}"
        "wfs_enable_request" "*"
        "ows_geometries" "geom"
        "ows_geom_type" "multiline"
    END
    VALIDATION
        "default_role_ids" "-1"
        "role_ids" "^-?[0-9,]*$"
    END
    MINSCALEDENOM 1
    MAXSCALEDENOM 180001
    CLASS
        NAME "Tuyaux"
        STYLE
            WIDTH 5
            COLOR 0 0 255
        END
        STYLE
            GEOMTRANSFORM "end"
            SYMBOL "triangle2"
            SIZE 20
            COLOR 0 0 255
            ANGLE AUTO
        END
        MINSCALEDENOM 1
        MAXSCALEDENOM 1801
    END
    CLASS
        NAME "Tuyaux"
        STYLE
            WIDTH 3
            COLOR 0 0 255
        END
        STYLE
            GEOMTRANSFORM "end"
            SYMBOL "triangle2"
            SIZE 12
            COLOR 0 0 255
            ANGLE AUTO
        END
        MINSCALEDENOM 1
        MAXSCALEDENOM 18001
    END
END

LAYER
    NAME "pom_edit_tuyaux"
    TYPE LINE
    STATUS ON
    PROJECTION "init=epsg:${SRID}" END
    EXTENT ${MAPFILE_EXTENT}
    TEMPLATE fooOnlyForWMSGetFeatureInfo
    CONNECTIONTYPE POSTGIS
    PROCESSING "CLOSE_CONNECTION=DEFER"
    CONNECTION "user=${PGUSER} password=${PGPASSWORD} dbname=${PGDATABASE} host=${PGHOST}"
    DATA "geom FROM (SELECT geo.*
                     FROM pompiers.pom_vgeo_edit_tuyaux AS geo
                     WHERE (ARRAY[%role_ids%] && ARRAY(${MAPSERVER_DATA_NOAREA_SUBSELECT} 'pom_edit_tuyaux'))
                    ) AS foo USING UNIQUE id USING srid=${SRID}"
    TOLERANCE ${WMS_TOLERANCE}
    DUMP TRUE
    METADATA
        "wms_title" "Transport d'eau (édition)"
        "gml_featureid" "id"
        "gml_types" "auto"
        "gml_include_items" "all"
        "gml_exclude_items" "id"
        "wms_srs" "${WMS_SRS}"
        "wfs_enable_request" "*"
        "ows_geometries" "geom"
        "ows_geom_type" "multiline"
    END
    VALIDATION
        "default_role_ids" "-1"
        "role_ids" "^-?[0-9,]*$"
    END
    MINSCALEDENOM 1
    MAXSCALEDENOM 180001
    CLASS
        NAME "Tuyaux"
        STYLE
            WIDTH 5
            COLOR 0 0 255
        END
        STYLE
            GEOMTRANSFORM "end"
            SYMBOL "triangle2"
            SIZE 20
            COLOR 0 0 255
            ANGLE AUTO
        END
        MINSCALEDENOM 1
        MAXSCALEDENOM 1801
    END
    CLASS
        NAME "Tuyaux"
        STYLE
            WIDTH 1
            COLOR 0 0 255
        END
        MINSCALEDENOM 1801
        MAXSCALEDENOM 180001
    END
END


LAYER
    NAME "pom_barrages"
    TYPE LINE
    STATUS ON
    PROJECTION "init=epsg:${SRID}" END
    EXTENT ${MAPFILE_EXTENT}
    TEMPLATE fooOnlyForWMSGetFeatureInfo
    CONNECTIONTYPE POSTGIS
    PROCESSING "CLOSE_CONNECTION=DEFER"
    CONNECTION "user=${PGUSER} password=${PGPASSWORD} dbname=${PGDATABASE} host=${PGHOST}"
    DATA "geom FROM (SELECT geo.*
                     FROM pompiers.pom_vgeo_barrages AS geo
                     WHERE (ARRAY[%role_ids%] && ARRAY(${MAPSERVER_DATA_NOAREA_SUBSELECT} 'pom_barrages'))
                    ) AS foo USING UNIQUE id USING srid=${SRID}"
    TOLERANCE ${WMS_TOLERANCE}
    DUMP TRUE
    METADATA
        "wms_title" "Barrages"
        "gml_featureid" "id"
        "gml_types" "auto"
        "gml_include_items" "all"
        "gml_exclude_items" "id"
        "wms_srs" "${WMS_SRS}"
        "wfs_enable_request" "*"
        "ows_geometries" "geom"
        "ows_geom_type" "multiline"
    END
    VALIDATION
        "default_role_ids" "-1"
        "role_ids" "^-?[0-9,]*$"
    END
    MINSCALEDENOM 1
    MAXSCALEDENOM 1801
    CLASS
        NAME "Barrages"
        STYLE
            WIDTH 5
            COLOR 255 125 0
        END
        STYLE
            GEOMTRANSFORM "start"
            SYMBOL "circle"
            SIZE 15
            COLOR 255 125 0
        END
        STYLE
            GEOMTRANSFORM "end"
            SYMBOL "circle"
            SIZE 15
            COLOR 255 125 0
        END
    END
END

LAYER
    NAME "pom_edit_barrages"
    TYPE LINE
    STATUS ON
    PROJECTION "init=epsg:${SRID}" END
    EXTENT ${MAPFILE_EXTENT}
    TEMPLATE fooOnlyForWMSGetFeatureInfo
    CONNECTIONTYPE POSTGIS
    PROCESSING "CLOSE_CONNECTION=DEFER"
    CONNECTION "user=${PGUSER} password=${PGPASSWORD} dbname=${PGDATABASE} host=${PGHOST}"
    DATA "geom FROM (SELECT geo.*
                     FROM pompiers.pom_vgeo_edit_barrages AS geo
                     WHERE (ARRAY[%role_ids%] && ARRAY(${MAPSERVER_DATA_NOAREA_SUBSELECT} 'pom_edit_barrages'))
                    ) AS foo USING UNIQUE id USING srid=${SRID}"
    TOLERANCE ${WMS_TOLERANCE}
    DUMP TRUE
    METADATA
        "wms_title" "Barrages (édition)"
        "gml_featureid" "id"
        "gml_types" "auto"
        "gml_include_items" "all"
        "gml_exclude_items" "id"
        "wms_srs" "${WMS_SRS}"
        "wfs_enable_request" "*"
        "ows_geometries" "geom"
        "ows_geom_type" "multiline"
    END
    VALIDATION
        "default_role_ids" "-1"
        "role_ids" "^-?[0-9,]*$"
    END
    MINSCALEDENOM 1
    MAXSCALEDENOM 180001
    CLASS
        NAME "Barrages"
        STYLE
            WIDTH 5
            COLOR 255 125 0
        END
        STYLE
            GEOMTRANSFORM "start"
            SYMBOL "circle"
            SIZE 15
            COLOR 255 125 0
        END
        STYLE
            GEOMTRANSFORM "end"
            SYMBOL "circle"
            SIZE 15
            COLOR 255 125 0
        END
        MINSCALEDENOM 1
        MAXSCALEDENOM 1801
    END
    CLASS
        NAME "Barrages"
        STYLE
            GEOMTRANSFORM "centroid"
            SYMBOL "circle"
            SIZE 10
            COLOR 255 125 0
            OUTLINECOLOR 255 255 255
        END
        MINSCALEDENOM 1801
        MAXSCALEDENOM 180001
    END
END

LAYER
    NAME "pom_personnel"
    TYPE POINT
    STATUS ON
    PROJECTION "init=epsg:${SRID}" END
    EXTENT ${MAPFILE_EXTENT}
    TEMPLATE fooOnlyForWMSGetFeatureInfo
    CONNECTIONTYPE POSTGIS
    PROCESSING "CLOSE_CONNECTION=DEFER"
    CONNECTION "user=${PGUSER} password=${PGPASSWORD} dbname=${PGDATABASE} host=${PGHOST}"
    DATA "geom FROM (SELECT geo.*
                     FROM pompiers.pom_personnel AS geo
                     WHERE (ARRAY[%role_ids%] && ARRAY(${MAPSERVER_DATA_NOAREA_SUBSELECT} 'pom_personnel'))
                    ) AS foo USING UNIQUE id USING srid=${SRID}"
    TOLERANCE ${WMS_TOLERANCE}
    DUMP TRUE
    METADATA
        "wms_title" "Personnel d'intervention SDIS"
        "gml_featureid" "id"
        "gml_types" "auto"
        "gml_include_items" "all"
        "gml_exclude_items" "id,export,categorie"
        "wms_srs" "${WMS_SRS}"
        "wfs_enable_request" "*"
        "ows_geometries" "geom"
        "ows_geom_type" "point"
    END
    VALIDATION
        "default_role_ids" "-1"
        "role_ids" "^-?[0-9,]*$"
    END
    MINSCALEDENOM 1
    MAXSCALEDENOM 180001
    LABELMINSCALEDENOM 1
    LABELMAXSCALEDENOM 9001
    CLASS
        NAME "Nyon-Dôle"
        EXPRESSION ("[sdis]" = "Nyon-Dôle")
        STYLE
            SYMBOL "circle"
            COLOR 208 81 134
            OUTLINECOLOR 0 0 0
            SIZE 8
        END
        MINSCALEDENOM 36001
        MAXSCALEDENOM 180001
    END
    CLASS
        NAME "Jour (Nyon-Dôle)"
        EXPRESSION ("[categorie]" = "1" AND "[sdis]" = "Nyon-Dôle")
        STYLE
            SYMBOL "pom_personnel_jour_nd"
            SIZE 20
        END
        TEXT "[grade] [nom] [prenom]"
        LABEL
            TYPE TRUETYPE
            FONT "OpenSans-Bold"
            SIZE 8
            ANTIALIAS TRUE
            COLOR 255 255 255
            OUTLINECOLOR 208 81 134
            OUTLINEWIDTH 1
            POSITION LC
            ALIGN CENTER
            OFFSET 0 5
            WRAP " "
            MAXLENGTH 15
        END
        MINSCALEDENOM 1
        MAXSCALEDENOM 36001
    END
    CLASS
        NAME "Nuit (Nyon-Dôle)"
        EXPRESSION ("[categorie]" = "2" AND "[sdis]" = "Nyon-Dôle")
        STYLE
            SYMBOL "pom_personnel_nuit_nd"
            SIZE 20
        END
        TEXT "[grade] [nom] [prenom]"
        LABEL
            TYPE TRUETYPE
            FONT "OpenSans-Bold"
            SIZE 8
            ANTIALIAS TRUE
            COLOR 255 255 255
            OUTLINECOLOR 208 81 134
            OUTLINEWIDTH 1
            POSITION LC
            ALIGN CENTER
            OFFSET 0 5
            WRAP " "
            MAXLENGTH 15
        END
        MINSCALEDENOM 1
        MAXSCALEDENOM 36001
    END
    CLASS
        NAME "Jour et nuit (Nyon-Dôle)"
        EXPRESSION ("[categorie]" = "3" AND "[sdis]" = "Nyon-Dôle")
        STYLE
            SYMBOL "pom_personnel_jour_nuit_nd"
            SIZE 20
        END
        TEXT "[grade] [nom] [prenom]"
        LABEL
            TYPE TRUETYPE
            FONT "OpenSans-Bold"
            SIZE 8
            ANTIALIAS TRUE
            COLOR 255 255 255
            OUTLINECOLOR 208 81 134
            OUTLINEWIDTH 1
            POSITION LC
            ALIGN CENTER
            OFFSET 0 5
            WRAP " "
            MAXLENGTH 15
        END
        MINSCALEDENOM 1
        MAXSCALEDENOM 36001
    END
    CLASS
        NAME "CI-DIR (Nyon-Dôle)"
        EXPRESSION ("[categorie]" = "4" AND "[sdis]" = "Nyon-Dôle")
        STYLE
            SYMBOL "triangle"
            SIZE 15
            COLOR 208 81 134
            OUTLINECOLOR 0 0 0
        END
        TEXT "[grade] [nom] [prenom]"
        LABEL
            TYPE TRUETYPE
            FONT "OpenSans-Bold"
            SIZE 8
            ANTIALIAS TRUE
            COLOR 255 255 255
            OUTLINECOLOR 208 81 134
            OUTLINEWIDTH 1
            POSITION LC
            ALIGN CENTER
            OFFSET 0 5
            WRAP " "
            MAXLENGTH 15
        END
        MINSCALEDENOM 1
        MAXSCALEDENOM 36001
    END
END

LAYER
    NAME "pom_secteurs_intervention"
    TYPE POLYGON
    STATUS ON
    PROJECTION "init=epsg:${SRID}" END
    EXTENT ${MAPFILE_EXTENT}
    TEMPLATE fooOnlyForWMSGetFeatureInfo
    CONNECTIONTYPE POSTGIS
    PROCESSING "CLOSE_CONNECTION=DEFER"
    CONNECTION "user=${PGUSER} password=${PGPASSWORD} dbname=${PGDATABASE} host=${PGHOST}"
    DATA "geom FROM (SELECT geo.geom, geo.id,
                            geo.type, geo.sous_type
                     FROM pompiers.pom_secteurs_intervention AS geo
                     WHERE (ARRAY[%role_ids%] && ARRAY(${MAPSERVER_DATA_NOAREA_SUBSELECT} 'pom_secteurs_intervention'))
                    ) AS foo USING UNIQUE id USING srid=${SRID}"
    TOLERANCE ${WMS_TOLERANCE}
    DUMP TRUE
    METADATA
        "wms_title" "Secteurs d'intervention"
        "gml_featureid" "id"
        "gml_types" "auto"
        "gml_include_items" "type,sous_type"
        "wms_srs" "${WMS_SRS}"
        "wfs_enable_request" "*"
        "ows_geometries" "geom"
        "ows_geom_type" "multipolygon"
    END
    VALIDATION
        "default_role_ids" "-1"
        "role_ids" "^-?[0-9,]*$"
    END
    MINSCALEDENOM 1
    MAXSCALEDENOM 180001
    CLASS
        NAME "Secteurs DCH"
        EXPRESSION ("[type]" = "DCH")
        STYLE
            OUTLINECOLOR 170 0 255
            WIDTH 5
            GEOMTRANSFORM (buffer([shape], 5))
        END
    END
    CLASS
        NAME "Secteurs pionnier"
        EXPRESSION ("[type]" = "Désincarcération")
        STYLE
            OUTLINECOLOR 0 0 255
            WIDTH 5
        END
    END
    CLASS
        NAME "Feu primaire"
        EXPRESSION ("[type]" = "Feu" && "[sous_type]" = "Feu primaire")
        STYLE
            COLOR 245 148 50
            OPACITY 70
            OUTLINECOLOR 0 0 0
            WIDTH 1
        END
    END
    CLASS
        NAME "Feu secondaire"
        EXPRESSION ("[type]" = "Feu" && "[sous_type]" = "Feu secondaire")
        STYLE
            COLOR 255 255 127
            OPACITY 70
            OUTLINECOLOR 0 0 0
            WIDTH 1
        END
    END
    CLASS
        NAME "Feu renfort"
        EXPRESSION ("[type]" = "Feu" && "[sous_type]" = "Feu renfort")
        STYLE
            COLOR 170 255 127
            OPACITY 70
            OUTLINECOLOR 0 0 0
            WIDTH 1
        END
    END
END

LAYER
    NAME "pom_sites"
    TYPE POINT
    STATUS ON
    PROJECTION "init=epsg:${SRID}" END
    EXTENT ${MAPFILE_EXTENT}
    TEMPLATE fooOnlyForWMSGetFeatureInfo
    CONNECTIONTYPE POSTGIS
    PROCESSING "CLOSE_CONNECTION=DEFER"
    CONNECTION "user=${PGUSER} password=${PGPASSWORD} dbname=${PGDATABASE} host=${PGHOST}"
    DATA "geom FROM (SELECT t.geom, t.id,
                            t.nom, t.type, t.categorie
               FROM pompiers.pom_sites AS t) AS foo USING UNIQUE id USING srid=${SRID}"
    TOLERANCE ${WMS_TOLERANCE}
    DUMP TRUE
    METADATA
        "wms_title" "Sites (casernes)"
        "wms_srs" "${WMS_SRS}"
        "wfs_enable_request" "*"
        "gml_featureid" "id"
        "gml_types" "auto"
        "gml_include_items" "nom,categorie"
        "ows_geometries" "geom"
        "ows_geom_type" "point"
    END
    MINSCALEDENOM 1
    MAXSCALEDENOM 180001
    LABELITEM "nom"
    CLASSITEM "type"
    CLASS
        NAME "DAP"
        EXPRESSION "DAP"
        STYLE
            SYMBOL "circle"
            SIZE 10
            OUTLINECOLOR 0 0 0
            COLOR 255 255 255
        END
        STYLE
            SYMBOL "circle"
            SIZE 5
            OUTLINECOLOR 0 0 0
            COLOR 0 0 0
        END
        LABEL
            TYPE TRUETYPE
            FONT "OpenSans-Bold"
            SIZE 8
            ANTIALIAS TRUE
            COLOR 0 0 0
            OUTLINECOLOR 255 255 255
            POSITION UC
            ALIGN CENTER
            OFFSET 0 5
            FORCE TRUE
        END
    END
    CLASS
        NAME "DPS"
        EXPRESSION "DPS"
        STYLE
            SYMBOL "circle"
            SIZE 10
            OUTLINECOLOR 0 0 0
            COLOR 255 255 255
        END
        LABEL
            TYPE TRUETYPE
            FONT "OpenSans-Bold"
            SIZE 8
            ANTIALIAS TRUE
            COLOR 0 0 0
            OUTLINECOLOR 255 255 255
            POSITION UC
            ALIGN CENTER
            OFFSET 0 5
            FORCE TRUE
        END
    END
    CLASS
        NAME "Local"
        EXPRESSION "Local"
        STYLE
            SYMBOL "circle"
            SIZE 6
            OUTLINECOLOR 0 0 0
            COLOR 0 0 0
        END
        LABEL
            TYPE TRUETYPE
            FONT "OpenSans-Bold"
            SIZE 8
            ANTIALIAS TRUE
            COLOR 0 0 0
            OUTLINECOLOR 255 255 255
            POSITION UC
            ALIGN CENTER
            OFFSET 0 5
            FORCE TRUE
        END
    END
END

LAYER
    NAME "pom_secteurs_organisationnels"
    TYPE POLYGON
    STATUS ON
    PROJECTION "init=epsg:${SRID}" END
    EXTENT ${MAPFILE_EXTENT}
    TEMPLATE fooOnlyForWMSGetFeatureInfo
    CONNECTIONTYPE POSTGIS
    PROCESSING "CLOSE_CONNECTION=DEFER"
    CONNECTION "user=${PGUSER} password=${PGPASSWORD} dbname=${PGDATABASE} host=${PGHOST}"
    DATA "geom FROM (SELECT t.geom, t.id,
                            t.sdis, t.site_operationnel, t.categorie
               FROM pompiers.pom_secteurs_organisationnels AS t) AS foo USING UNIQUE id USING srid=${SRID}"
    TOLERANCE ${WMS_TOLERANCE}
    DUMP TRUE
    METADATA
        "wms_title" "Secteurs organisationnels"
        "wms_srs" "${WMS_SRS}"
        "wfs_enable_request" "*"
        "gml_featureid" "id"
        "gml_types" "auto"
        "gml_include_items" "sdis,site_operationnel,categorie"
        "ows_geometries" "geom"
        "ows_geom_type" "polygon"
    END
    MINSCALEDENOM 1
    MAXSCALEDENOM 180001
    LABELITEM "categorie"
    CLASSITEM "sdis"
    CLASS
        NAME "Nyon-Dôle"
        EXPRESSION "Nyon-Dôle"
        STYLE
            OUTLINECOLOR 0 0 0
            COLOR 208 81 134
            OPACITY 32
            WIDTH 2
        END
        LABEL
            TYPE TRUETYPE
            FONT "OpenSans-Bold"
            SIZE 10
            ANTIALIAS TRUE
            COLOR 0 0 0
            OUTLINECOLOR 255 255 255
            POSITION AUTO
            ALIGN CENTER
            OFFSET 0 5
            FORCE TRUE
        END
    END
    CLASS
        NAME "Gland-Serine"
        EXPRESSION "Gland-Serine"
        STYLE
            OUTLINECOLOR 0 0 0
            COLOR 2 117 237
            OPACITY 32
            WIDTH 2
        END
        LABEL
            TYPE TRUETYPE
            FONT "OpenSans-Bold"
            SIZE 10
            ANTIALIAS TRUE
            COLOR 0 0 0
            OUTLINECOLOR 255 255 255
            POSITION AUTO
            ALIGN CENTER
            OFFSET 0 5
            FORCE TRUE
        END
    END
    CLASS
        NAME "Terre-Sainte"
        EXPRESSION "Terre-Sainte"
        STYLE
            OUTLINECOLOR 0 0 0
            COLOR 145 82 45
            OPACITY 32
            WIDTH 2
        END
        LABEL
            TYPE TRUETYPE
            FONT "OpenSans-Bold"
            SIZE 10
            ANTIALIAS TRUE
            COLOR 0 0 0
            OUTLINECOLOR 255 255 255
            POSITION AUTO
            ALIGN CENTER
            OFFSET 0 5
            FORCE TRUE
        END
    END
END

LAYER
    NAME "pom_prises_arrosage_sane"
    TYPE POINT
    STATUS ON
    PROJECTION "init=epsg:${SRID}" END
    EXTENT ${MAPFILE_EXTENT}
    TEMPLATE fooOnlyForWMSGetFeatureInfo
    CONNECTIONTYPE POSTGIS
    PROCESSING "CLOSE_CONNECTION=DEFER"
    CONNECTION "user=${PGUSER} password=${PGPASSWORD} dbname=${PGDATABASE} host=${PGHOST}"
    DATA "geom FROM (SELECT geo.*
                     FROM pompiers.pom_prises_arrosage_sane AS geo
                     WHERE (ARRAY[%role_ids%] && ARRAY(${MAPSERVER_DATA_NOAREA_SUBSELECT} 'pom_prises_arrosage_sane'))
                    ) AS foo USING UNIQUE id USING srid=${SRID}"
    TOLERANCE ${WMS_TOLERANCE}
    DUMP TRUE
    METADATA
        "wms_title" "Prises d'arrosage SANE"
        "wms_srs" "${WMS_SRS}"
        "wfs_enable_request" "*"
        "gml_featureid" "id"
        "gml_types" "auto"
        "gml_include_items" "no_objet"
        "ows_geometries" "geom"
        "ows_geom_type" "point"
    END
    VALIDATION
        "default_role_ids" "-1"
        "role_ids" "^-?[0-9,]*$"
    END
    LABELITEM "no_objet"
    MINSCALEDENOM 1
    MAXSCALEDENOM 3601
    CLASS
        STYLE
            SYMBOL "square"
            COLOR 0 120 190
            OUTLINECOLOR 255 255 255
            SIZE 12
        END
        STYLE
            SYMBOL "circle"
            COLOR 255 255 255
            SIZE 7
        END
        LABEL
            TYPE TRUETYPE
            FONT "OpenSans-Bold"
            SIZE 8
            ANTIALIAS TRUE
            COLOR 0 120 190
            OUTLINECOLOR 255 255 255
            OUTLINEWIDTH 1
            POSITION UR
            ALIGN CENTER
            OFFSET 0 3
            FORCE TRUE
        END
    END
END
